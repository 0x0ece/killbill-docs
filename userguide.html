<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.1">
<meta name="author" content="Kill Bill core team &lt;killbilling-users@googlegroups.com&gt;">
<title>Kill Bill user guide</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic|Noto+Serif:400,400italic,700,700italic|Droid+Sans+Mono:400">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove the comments around the @import statement below when using this as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic|Noto+Serif:400,400italic,700,700italic|Droid+Sans+Mono:400";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
#map_canvas img,#map_canvas embed,#map_canvas object,.map_canvas img,.map_canvas embed,.map_canvas object{max-width:none!important}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
.antialiased,body{-webkit-font-smoothing:antialiased}
img{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{display:inline-block;color:rgba(0,0,0,.8);font-size:.75em;line-height:1.4;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:-.15em .15em 0 .15em;padding:.2em .6em .2em .5em;vertical-align:middle;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.05em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.spread{width:100%}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-check-square-o:first-child,ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1{padding-right:.75em;font-weight:bold}
td.hdlist1,td.hdlist2{vertical-align:top}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none}
span.footnote,span.footnoteref{vertical-align:super;font-size:.875em}
span.footnote a,span.footnoteref a{text-decoration:none}
span.footnote a:active,span.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em;line-height:1.3;font-size:.875em;margin-left:1.2em;text-indent:-1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
h1,h2{letter-spacing:-.01em}
dt,th.tableblock,td.content{text-rendering:optimizeLegibility}
p,td.content{letter-spacing:-.01em}
p strong,td.content strong{letter-spacing:-.005em}
p,blockquote,dt,td.content{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img{page-break-inside:avoid}
thead{display:table-header-group}
img{max-width:100%!important}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.1/styles/github.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.1/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
</head>
<body class="book">
<div id="header">
<h1>Kill Bill user guide</h1>
<div class="details">
<span id="author" class="author">Kill Bill core team &lt;killbilling-users@googlegroups.com&gt;</span><br>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#intro">Introduction</a>
<ul class="sectlevel2">
<li><a href="#five-minutes">Kill Bill in 5 minutes</a>
<ul class="sectlevel3">
<li><a href="#five-minutes-create-tenant">Create your own tenant</a></li>
<li><a href="#five-minutes-create-account">Create an account</a></li>
<li><a href="#five-minutes-create-subscription">Create a subscription</a></li>
<li><a href="#five-minutes-change-plan-and-cancel">Upgrade/Cancel the plan for the subscription</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#components">Components</a>
<ul class="sectlevel2">
<li><a href="#components-catalog">Catalog</a>
<ul class="sectlevel3">
<li><a href="#components-catalog-overview">Overview</a></li>
<li><a href="#components-catalog-introduction">Introduction</a>
<ul class="sectlevel4">
<li><a href="#_concepts">Concepts</a>
<ul class="sectlevel5">
<li><a href="#_background_concepts">Background Concepts</a></li>
</ul>
</li>
<li><a href="#_what_s_in_a_catalog">What’s in a Catalog?</a></li>
<li><a href="#_catalog_documentation">Catalog Documentation</a></li>
</ul>
</li>
<li><a href="#components-catalog-basic">Basic Catalog Tutorial</a>
<ul class="sectlevel4">
<li><a href="#_creating_the_catalog">Creating the Catalog</a></li>
<li><a href="#_products">Products</a></li>
<li><a href="#_rules">Rules</a></li>
</ul>
</li>
<li><a href="#_plans">Plans</a></li>
<li><a href="#_price_list">Price list</a></li>
<li><a href="#components-catalog-advanced">Advanced Catalog Tutorial</a>
<ul class="sectlevel4">
<li><a href="#_overview">Overview</a></li>
<li><a href="#_add_ons">Add-ons</a></li>
<li><a href="#_price_lists">Price lists</a></li>
<li><a href="#_rules_2">Rules</a>
<ul class="sectlevel5">
<li><a href="#_rule_plan_creation_billing_alignment">Rule: Plan Creation Billing Alignment</a></li>
<li><a href="#_rule_plan_creation_add_on_phase_alignment">Rule: Plan Creation Add-On Phase Alignment</a></li>
<li><a href="#_rule_plan_cancellation_timing">Rule: Plan Cancellation Timing</a></li>
<li><a href="#_rule_plan_change_timing">Rule: Plan Change Timing</a></li>
<li><a href="#_rule_plan_change_phase_alignment">Rule: Plan Change Phase Alignment</a></li>
<li><a href="#_rule_plan_change_price_list_choice">Rule: Plan Change Price List Choice</a></li>
</ul>
</li>
<li><a href="#_catalog_changes">Catalog changes</a>
<ul class="sectlevel5">
<li><a href="#_deferred_price_change">Deferred Price Change</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#components-entitlement">Subscription and Entitlement</a>
<ul class="sectlevel3">
<li><a href="#_overview_2">Overview</a></li>
<li><a href="#_alignments">Alignments</a></li>
</ul>
</li>
<li><a href="#components-invoicing">Invoicing</a>
<ul class="sectlevel3">
<li><a href="#components-invoicing">Overview</a></li>
<li><a href="#components-invoice-items">Invoice items</a>
<ul class="sectlevel4">
<li><a href="#_fixed_item">Fixed item</a></li>
<li><a href="#_recurring_item">Recurring item</a></li>
<li><a href="#_plan_changes">Plan changes</a></li>
<li><a href="#_invoice_item_adjustment">Invoice item adjustment</a></li>
<li><a href="#_invoice_adjustment">Invoice adjustment</a></li>
<li><a href="#_credit">Credit</a></li>
</ul>
</li>
<li><a href="#components-invoice-payments">Invoice payments</a>
<ul class="sectlevel4">
<li><a href="#_refund">Refund</a></li>
<li><a href="#_chargeback">Chargeback</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#components-payment">Payment</a>
<ul class="sectlevel3">
<li><a href="#components-payment-states">Payment states</a></li>
<li><a href="#components-payment-retries">Payment retries</a></li>
</ul>
</li>
<li><a href="#components-overdue">Overdue</a>
<ul class="sectlevel3">
<li><a href="#components-overdue-overview">Overview</a></li>
</ul>
</li>
<li><a href="#components-analytics">Analytics</a>
<ul class="sectlevel3">
<li><a href="#components-analytics-overview">Overview</a>
<ul class="sectlevel4">
<li><a href="#_internals">Internals</a></li>
</ul>
</li>
<li><a href="#components-analytics-currency">Currency conversion</a></li>
<li><a href="#components-analytics-accounts">Accounts</a></li>
<li><a href="#components-analytics-bundles">Bundles</a></li>
<li><a href="#components-analytics-subscriptions">Subscriptions</a></li>
<li><a href="#components-analytics-invoices">Invoices</a></li>
<li><a href="#components-analytics-payments">Payments</a></li>
<li><a href="#components-analytics-entitlement">Entitlement states</a></li>
<li><a href="#components-analytics-tags-fields">Tags and custom fields</a></li>
<li><a href="#components-analytics-dashboards">Dashboards and reports</a>
<ul class="sectlevel4">
<li><a href="#_data_api">Data API</a></li>
<li><a href="#_dashboards">Dashboards</a>
<ul class="sectlevel5">
<li><a href="#_reports_configuration">Reports configuration</a></li>
<li><a href="#_dashboard_api">Dashboard API</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#components-tenant">Tenant</a>
<ul class="sectlevel3">
<li><a href="#components-tenant-overview">Overview</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#deployment">Deployment</a>
<ul class="sectlevel2">
<li><a href="#_common_steps">Common steps</a>
<ul class="sectlevel3">
<li><a href="#_download_the_latest_version_of_kill_bill_server">Download the latest version of Kill Bill server</a></li>
<li><a href="#_setup_the_database">Setup the database</a></li>
<li><a href="#deployment-plugins">Install plugins</a>
<ul class="sectlevel4">
<li><a href="#_bundles_directory_layout">Bundles directory layout</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#deployment-jetty">Installation in Jetty</a>
<ul class="sectlevel3">
<li><a href="#_download_the_jetty_container">Download the Jetty container</a></li>
<li><a href="#_deploy_kill_bill_in_jetty">Deploy Kill Bill in Jetty</a></li>
<li><a href="#_enable_ssl">Enable SSL</a></li>
</ul>
</li>
<li><a href="#deployment-tomcat">Installation in Tomcat</a>
<ul class="sectlevel3">
<li><a href="#_download_the_tomcat_container">Download the Tomcat container</a></li>
<li><a href="#_deploy_kill_bill_in_tomcat">Deploy Kill Bill in Tomcat</a></li>
</ul>
</li>
<li><a href="#deployment-glassfish">Installation in Glassfish</a>
<ul class="sectlevel3">
<li><a href="#_download_the_glassfish_container">Download the GlassFish container</a></li>
<li><a href="#_deploy_kill_bill_in_glassfish">Deploy Kill Bill in GlassFish</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#configuration">Configuration</a>
<ul class="sectlevel2">
<li><a href="#_system_properties">System properties</a>
<ul class="sectlevel3">
<li><a href="#configuration-overview">Overview</a></li>
<li><a href="#configuration-cache">Cache config</a></li>
<li><a href="#configuration-catalog">Catalog config</a></li>
<li><a href="#configuration-email">Email config</a></li>
<li><a href="#configuration-invoice">Invoice config</a></li>
<li><a href="#configuration-jdbc">JDBC config</a></li>
<li><a href="#configuration-notification">Notification queue config</a></li>
<li><a href="#configuration-osgi">OSGI config</a></li>
<li><a href="#configuration-overdue">Overdue config</a></li>
<li><a href="#configuration-payment">Payment config</a></li>
<li><a href="#configuration-bus">Persistent bus config</a></li>
<li><a href="#configuration-translation">Translation config</a></li>
<li><a href="#configuration-rbac">RBAC config</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#apis">APIs</a>
<ul class="sectlevel2">
<li><a href="#_rest_api">REST API</a>
<ul class="sectlevel3">
<li><a href="#_accountresource">AccountResource</a>
<ul class="sectlevel4">
<li><a href="#_apis">APIs</a></li>
<li><a href="#_json_fields_accountjson">Json fields AccountJson</a></li>
<li><a href="#_json_fields_paymenttransactionjson">Json fields PaymentTransactionJson</a></li>
<li><a href="#_json_fields_paymentmethodjson">Json fields PaymentMethodJson</a></li>
<li><a href="#_json_fields_invoiceemailjson">Json fields InvoiceEmailJson</a></li>
<li><a href="#_json_fields_accountemailjson">Json fields AccountEmailJson</a></li>
</ul>
</li>
<li><a href="#_bundleresource">BundleResource</a>
<ul class="sectlevel4">
<li><a href="#_apis_2">APIs</a></li>
<li><a href="#_json_fields_bundlejson">Json fields BundleJson</a></li>
</ul>
</li>
<li><a href="#_catalogresource">CatalogResource</a>
<ul class="sectlevel4">
<li><a href="#_apis_3">APIs</a></li>
</ul>
</li>
<li><a href="#_creditresource">CreditResource</a>
<ul class="sectlevel4">
<li><a href="#_apis_4">APIs</a></li>
<li><a href="#_json_fields_creditjson">Json fields CreditJson</a></li>
</ul>
</li>
<li><a href="#_customfieldresource">CustomFieldResource</a>
<ul class="sectlevel4">
<li><a href="#_apis_5">APIs</a></li>
</ul>
</li>
<li><a href="#_exportresource">ExportResource</a>
<ul class="sectlevel4">
<li><a href="#_apis_6">APIs</a></li>
</ul>
</li>
<li><a href="#_invoicepaymentresource">InvoicePaymentResource</a>
<ul class="sectlevel4">
<li><a href="#_apis_7">APIs</a></li>
<li><a href="#_json_fields_invoicepaymenttransactionjson">Json fields InvoicePaymentTransactionJson</a></li>
</ul>
</li>
<li><a href="#_invoiceresource">InvoiceResource</a>
<ul class="sectlevel4">
<li><a href="#_apis_8">APIs</a></li>
<li><a href="#_json_fields_invoicepaymentjson">Json fields InvoicePaymentJson</a></li>
<li><a href="#_json_fields_invoiceitemjson">Json fields InvoiceItemJson</a></li>
</ul>
</li>
<li><a href="#_paymentgatewayresource">PaymentGatewayResource</a>
<ul class="sectlevel4">
<li><a href="#_apis_9">APIs</a></li>
<li><a href="#_json_fields_hostedpaymentpagefieldsjson">Json fields HostedPaymentPageFieldsJson</a></li>
</ul>
</li>
<li><a href="#_paymentmethodresource">PaymentMethodResource</a>
<ul class="sectlevel4">
<li><a href="#_apis_10">APIs</a></li>
</ul>
</li>
<li><a href="#_paymentresource">PaymentResource</a>
<ul class="sectlevel4">
<li><a href="#_apis_11">APIs</a></li>
<li><a href="#_json_fields_paymenttransactionjson_2">Json fields PaymentTransactionJson</a></li>
</ul>
</li>
<li><a href="#_securityresource">SecurityResource</a>
<ul class="sectlevel4">
<li><a href="#_apis_12">APIs</a></li>
</ul>
</li>
<li><a href="#_subscriptionresource">SubscriptionResource</a>
<ul class="sectlevel4">
<li><a href="#_apis_13">APIs</a></li>
<li><a href="#_json_fields_subscriptionjson">Json fields SubscriptionJson</a></li>
</ul>
</li>
<li><a href="#_tagdefinitionresource">TagDefinitionResource</a>
<ul class="sectlevel4">
<li><a href="#_apis_14">APIs</a></li>
<li><a href="#_json_fields_tagdefinitionjson">Json fields TagDefinitionJson</a></li>
</ul>
</li>
<li><a href="#_tagresource">TagResource</a>
<ul class="sectlevel4">
<li><a href="#_apis_15">APIs</a></li>
</ul>
</li>
<li><a href="#_tenantresource">TenantResource</a>
<ul class="sectlevel4">
<li><a href="#_apis_16">APIs</a></li>
<li><a href="#_json_fields_tenantjson">Json fields TenantJson</a></li>
</ul>
</li>
<li><a href="#_testresource">TestResource</a>
<ul class="sectlevel4">
<li><a href="#_apis_17">APIs</a></li>
</ul>
</li>
<li><a href="#_transactionresource">TransactionResource</a>
<ul class="sectlevel4">
<li><a href="#_apis_18">APIs</a></li>
<li><a href="#_json_fields_paymenttransactionjson_3">Json fields PaymentTransactionJson</a></li>
</ul>
</li>
<li><a href="#_usageresource">UsageResource</a>
<ul class="sectlevel4">
<li><a href="#_apis_19">APIs</a></li>
<li><a href="#_json_fields_usagejson">Json fields UsageJson</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_java_api">Java API</a></li>
</ul>
</li>
<li><a href="#kaui">Kaui</a></li>
<li><a href="#_glossary">Glossary</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This is the reference guide to get started with Kill Bill. Make sure to check out our <a href="http://docs.kill-bill.org/faq.html">FAQ</a> too.</p>
</div>
<div class="paragraph">
<p>Note: this is for Kill Bill 0.9 and above. For 0.8, check <a href="http://docs.kill-bill.org/userguide-0.8.html">this guide</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="intro">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Kill Bill as a system, is composed of several components:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The core billing platform itself, which is embedded in a web server to offer a REST api. When we refer to Kill Bill in that documentation this is what we are referring to, unless explicitly specified</p>
</li>
<li>
<p>KAUI, the Kill Bill Admin UI, which is a Rails mountable engine, and communicates to the core billing platform using the REST api</p>
</li>
<li>
<p>A set of client libraries (Java, Ruby, PHP, Node.js, &#8230;&#8203;)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Let&#8217;s go through a common (web) use case of Kill Bill. One would create a custom webapp, which would contain the application&#8217;s specific business logic, and have that webapp interact with Kill Bill using the REST API. In that use case, the custom webapp would:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Offer a way for customers to select a plan from the Kill Bill catalog, which would result in the creation a Subscription in Kill Bill</p>
</li>
<li>
<p>Offer a form for customers to enter their CC information&#8201;&#8212;&#8201;or any other payment method. Here depending on the payment gateway, and also on PCI compliance, the flow would differ</p>
</li>
<li>
<p>Offer a way for customers to review/change their subscriptions</p>
</li>
<li>
<p>Offer a way for customers to review/change their payment methods</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It is important to understand that Kill Bill solves the billing problem but not the custom flow required around the billing platform
Besides the main use case described above, there are other possible options if one requires going that path:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>One could embed its webapp specific code inside Kill Bill, and therefore avoid having a separate web app.</p>
</li>
<li>
<p>Another use use case would be to embed Kill Bill into the custom web app: Below the REST API, Kill Bill offers a set of java APIs, and so it is possible to use Kill Bill as a billing library.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="five-minutes">Kill Bill in 5 minutes</h3>
<div class="paragraph">
<p>Download the latest killbill-server jetty-console.war from <a href="http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22org.kill-bill.billing%22%20AND%20a%3A%22killbill-server%22%20AND%20l%3A%22jetty-console%22%20AND%20p%3A%22war%22">Maven Central</a> (download the <strong>jetty-console.war</strong> artifact).</p>
</div>
<div class="paragraph">
<p>To start Kill Bill, either double click on the war file, or run the following in a terminal (recommended to check logs):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">java -jar killbill-server-*-jetty-console.war</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will start Kill Bill with an embedded H2 database (data is persisted in a local killbill.h2.db file, so changes are preserved across restarts).</p>
</div>
<div class="paragraph">
<p>After the system has started you can experiment by following the simple scenario below. Note that each call creating an object in the system returns its URI, and so the curls below are using the UUID that was returned at the time the demo was created. You would need to replace the UUID with the one returned in each call if you were to follow that demo.</p>
</div>
<div class="paragraph">
<p>If you get an error like the following at startup:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">16:12:23,432 |-ERROR in ch.qos.logback.core.util.ContextUtil@7a0c1f5f - Failed to get local hostname java.net.UnknownHostException: HOSTNAME: HOSTNAME: nodename nor servname provided, or not known
	at java.net.UnknownHostException: HOSTNAME: HOSTNAME: nodename nor servname provided, or not known</code></pre>
</div>
</div>
<div class="paragraph">
<p>you may have an invalid hostname set. To work around it, add the following line in /etc/hosts:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">127.0.0.1 HOSTNAME localhost</code></pre>
</div>
</div>
<div class="paragraph">
<p>and restart Kill Bill.</p>
</div>
<div class="sect3">
<h4 id="five-minutes-create-tenant">Create your own tenant</h4>
<div class="paragraph">
<p>The default behavior of Kill Bill is to run with multi-tenancy enabled. In that mode, one needs to first create a tenant and specify the credentials that will be required subsequently on each call. Each call requires a default username and password that is used in the system for role base access control (RBAC). By default we are using the username 'admin' and its default password 'password'. The first operation is to create the tenant specifying the api key and secret that will need to be provided in each subsequent call:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">curl -v \
     -X POST \
     -u admin:password \
     -H 'Content-Type: application/json' \
     -H 'X-Killbill-CreatedBy: admin' \
     -d '{"apiKey": "bob", "apiSecret": "lazar"}' \
     http://127.0.0.1:8080/1.0/kb/tenants</code></pre>
</div>
</div>
<div class="paragraph">
<p>At this point one can retrieve a simple version of the default catalog shipped with the demo:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">curl -v \
     -uadmin:password \
     -H"X-Killbill-ApiKey:bob" \
     -H"X-Killbill-ApiSecret:lazar" \
     -H "Content-Type: application/json" \
     http://127.0.0.1:8080/1.0/kb/catalog/simpleCatalog

{"products":[{"type":"BASE","name":"Standard","plans":[{"name":"standard-monthly","phases":[{"type":"TRIAL","prices":[]},{"type":"EVERGREEN","prices":[{"currency":"GBP","value":75.00},{"currency":"USD","value":100.00}]}]}],"included":[],"available":[]},{"type":"BASE","name":"Sports","plans":[{"name":"sports-monthly","phases":[{"type":"TRIAL","prices":[]},{"type":"EVERGREEN","prices":[{"currency":"GBP","value":375.00},{"currency":"USD","value":500.00}]}]}],"included":[],"available":[]},{"type":"BASE","name":"Super","plans":[{"name":"super-monthly","phases":[{"type":"TRIAL","prices":[]},{"type":"EVERGREEN","prices":[{"currency":"GBP","value":750.00},{"currency":"USD","value":1000.00}]}]}],"included":[],"available":[]}]}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="five-minutes-create-account">Create an account</h4>
<div class="paragraph">
<p>The next step will be to create an account:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">curl -v \
     -uadmin:password \
     -H"X-Killbill-ApiKey:bob" \
     -H"X-Killbill-ApiSecret:lazar" \
     -X POST \
     -H "Content-Type: application/json" \
     -H "X-Killbill-CreatedBy: creator" \
     --data-binary '{"name":"john","email":"john@foo.com","externalKey":"xfgrdsda","currency":"USD"}' \
     http://127.0.0.1:8080/1.0/kb/accounts</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now we can attach a payment method. Since that demo does not have any real payment plugin attached to it, we will chose the default external payment method plugin that comes up configured in the system. That default payment plugin does not require and payment method details such as CC info, and so the pluginInfo parameter is an empty map:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">curl -v \
     -uadmin:password \
     -H"X-Killbill-ApiKey:bob" \
     -H"X-Killbill-ApiSecret:lazar" \
     -X POST \
     -H "Content-Type: application/json" \
     -H "X-Killbill-CreatedBy: creator" \
     --data-binary '{"pluginName":"__EXTERNAL_PAYMENT__","pluginInfo":{}}' \
     "http://127.0.0.1:8080/1.0/kb/accounts/268983f2-5443-47e4-a967-b8962fc699c5/paymentMethods?isDefault=true"

{"uri":"http://127.0.0.1:8080/1.0/kb/paymentMethods/eef35072-f70e-43da-a614-3215dbc1e28a"}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="five-minutes-create-subscription">Create a subscription</h4>
<div class="paragraph">
<p>At this point we can create a subscription based on the default demo catalog:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">curl -v \
     -uadmin:password \
     -H"X-Killbill-ApiKey:bob" \
     -H"X-Killbill-ApiSecret:lazar" \
     -X POST \
     -H "Content-Type: application/json" \
     -H "X-Killbill-CreatedBy: creator" \
     --data-binary '{"accountId":"268983f2-5443-47e4-a967-b8962fc699c5","externalKey":"myBundleName","productName":"Standard","productCategory":"BASE","billingPeriod":"MONTHLY","priceList":"DEFAULT"}' \
     "http://127.0.0.1:8080/1.0/kb/subscriptions"

{"uri":"/1.0/kb/subscriptions/b623e0bd-45fd-4636-b177-6528228c5f35"}</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is interesting to verify that the system immediately invoiced for the subscription that was created. Because the subscription is using a Plan with trial phase of $0, there is no associated payment:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">curl -v \
     -uadmin:password \
     -H"X-Killbill-ApiKey:bob" \
     -H"X-Killbill-ApiSecret:lazar" \
     -H "Content-Type: application/json" \
     -H "X-Killbill-CreatedBy: creator" \
     "http://127.0.0.1:8080/1.0/kb/accounts/268983f2-5443-47e4-a967-b8962fc699c5/invoices"

[{"amount":0.00,"currency":"USD","creditAdj":0.00,"refundAdj":0.00,"invoiceId":"15a0abc7-2489-493c-b098-7460afc21203","invoiceDate":"2013-08-25","targetDate":"2013-08-25","invoiceNumber":"1","balance":0.00,"accountId":"268983f2-5443-47e4-a967-b8962fc699c5","auditLogs":null}]</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="five-minutes-change-plan-and-cancel">Upgrade/Cancel the plan for the subscription</h4>
<div class="paragraph">
<p>We will now upgrade the plan from the 'Standard' to the 'Sports' product:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">curl -v \
     -uadmin:password \
     -H"X-Killbill-ApiKey:bob" \
     -H"X-Killbill-ApiSecret:lazar" \
     -X PUT \
     -H "Content-Type: application/json" \
     -H "X-Killbill-CreatedBy: creator" \
     --data-binary '{"productName":"Sports","productCategory":"BASE","billingPeriod":"MONTHLY","priceList":"DEFAULT"}' \
     "http://127.0.0.1:8080/1.0/kb/subscriptions/b623e0bd-45fd-4636-b177-6528228c5f35"</code></pre>
</div>
</div>
<div class="paragraph">
<p>At then finally, we will cancel the subscription.</p>
</div>
<div class="paragraph">
<p>Retrieving the invoices like we did in the previous step would show that a new invoice was automatically created after each change on the subscription. By default Kill Bill reacts to any change happening in the system automatically, creating invoices to match new state and trigerring payments when needed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">curl -v \
     -uadmin:password \
     -H"X-Killbill-ApiKey:bob" \
     -H"X-Killbill-ApiSecret:lazar" \
     -X DELETE \
     -H "Content-Type: application/json" \
     -H "X-Killbill-CreatedBy: creator" \
     "http://127.0.0.1:8080/1.0/kb/subscriptions/b623e0bd-45fd-4636-b177-6528228c5f35"</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="components">Components</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="components-catalog">Catalog</h3>
<div class="sect3">
<h4 id="components-catalog-overview">Overview</h4>
<div class="paragraph">
<p>The catalog is the central configuration object of Kill Bill for all of your Business rules. It contains what the customer buys (products), how the customer pays for a product (plans), change rules, prices, etc.</p>
</div>
<div class="paragraph">
<p>In practice, the catalog is an XML file (see an example <a href="https://github.com/killbill/killbill/blob/master/catalog/src/test/resources/SpyCarBasic.xml">here</a>). Please refer to the Catalog Configuration documentation to make Kill Bill use your own catalog.</p>
</div>
<div class="paragraph">
<p>The catalog is one of the most complex yet powerful tools provided by Kill Bill.</p>
</div>
<div class="paragraph">
<p>If you want to validate your catalog, you can use the catalog load-tool (replace 0.10.0 with your Kill Bill version):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">curl -O 'http://search.maven.org/remotecontent?filepath=org/kill-bill/billing/killbill-catalog/0.10.0/killbill-catalog-0.10.0-load-tool.jar'
java -jar killbill-catalog-0.10.0-load-tool.jar /path/to/catalog.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you see "Success: Catalog loads!", the catalog is valid.</p>
</div>
<div class="paragraph">
<p>Also, if you need an xsd file, you can generate one using the catalog xsd-tool:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">curl -O 'http://search.maven.org/remotecontent?filepath=org/kill-bill/billing/killbill-catalog/0.10.0/killbill-catalog-0.10.0-xsd-tool.jar'
java -jar killbill-catalog-0.10.0-xsd-tool.jar schema.xsd</code></pre>
</div>
</div>
<div class="paragraph">
<p>xsd files are also published on this site, at <a href="http://docs.kill-bill.org/xsd/killbill-0.10.0-catalog.xsd" class="bare">http://docs.kill-bill.org/xsd/killbill-0.10.0-catalog.xsd</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="components-catalog-introduction">Introduction</h4>
<div class="imageblock">
<div class="content">
<img src="data:image/gif:base64," alt="catalog overview">
</div>
</div>
<div class="paragraph">
<p>The Catalog is at the heart of the billing system. It is a data model that captures the core configuration of the billing operation. It is very important that all the business logic associated with the billing behaviour of your system is captured in the billing system. If your billing system is not capable of capturing that business logic it ends up being put in multiple places, your purchase flow, Admin UI, human process etc. It becomes very difficult to keep all these places consistent, and very difficult to make changes when they are needed.</p>
</div>
<div class="paragraph">
<p>Kill Bill provides a very powerful catalog that, unlike other billing systems, allows the administrator to set up sophisticated business rules around cancellation and plan changes. For example, Kill Bill can just be told to “Cancel” a plan and Kill Bill can know when to perform the cancel, based on things like the type of plan, or whether it is in trial.</p>
</div>
<div class="paragraph">
<p>The things you can configure with the Kill Bill catalog include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Trials and discount phases - plans can be configured with trial and discount phases so that they move automatically between different pricing schemes</p>
</li>
<li>
<p>Cancellation - business rules to determine when a cancellation should happen.</p>
</li>
<li>
<p>Plan Change - business rules to determine when to apply upgrades and downgrades.</p>
</li>
<li>
<p>Which add-ons are available with which products types, so that when the customer upgrades or downgrades add-ons that are not available are automatically cancelled</p>
</li>
<li>
<p>Billing Alignment - rules to determine if a Plan should be billed independently or on the account billing date.</p>
</li>
<li>
<p>Catalog change - ways to specify how and when catalog changes apply to new and existing subscriptions</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Kill Bill also supports the concept of a Price List, that is a grouping of (usually discount) plans that can be offered to a customer.</p>
</div>
<div class="paragraph">
<p>Of course, any catalog can only support a finite number of options. When you need to go further, and many people do, you can write plugins [Link to plugin docs] to implement pretty much anything you need.</p>
</div>
<div class="sect4">
<h5 id="_concepts">Concepts</h5>
<div class="paragraph">
<p>In this section we outline some key pieces of terminology that you will need to understand. Different billing systems use these same words to mean subtly different things so, even if you are familiar with the language, it is worth looking though exactly how we use the terms in Kill Bill.</p>
</div>
<div class="sect5">
<h6 id="_background_concepts">Background Concepts</h6>
<div class="ulist">
<ul>
<li>
<p><strong>Customer</strong> – someone who buys your product</p>
</li>
<li>
<p><strong>Administrator</strong> (or <strong>Admin</strong>) – the person who can use the Kill Bill UI to view and modify customer accounts</p>
</li>
<li>
<p><strong>Kill Bill Administrator</strong> (or <strong>Admin</strong>) - the person responsible for installing or configuring Kill Bill</p>
</li>
<li>
<p><strong>Account</strong> – a customer account. It represents what Kill Bill knows about a customer.</p>
</li>
<li>
<p><strong>Subscription</strong> – a Subscription is a contract between you and a customer to purchase a particular product with particular terms. In the system it associates a Plan (see below) with an Account and a start date.</p>
</li>
<li>
<p><strong>Subscription Bundle</strong> (or just <strong>Bundle</strong>) – Is a collection of subscriptions that are associated with a particular instance of a product. For example, you might have a voice plan, a data plan and a text plan for your mobile phone. In Kill Bill each plan would have its own subscription and we would represent the fact that they are associated with a single phone by grouping them in a Subscription Bundle. Of course an account might have multiple phones associated with it and a Kill Bill Account can have multiple Bundles associated with it</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_what_s_in_a_catalog">What’s in a Catalog?</h5>
<div class="paragraph">
<p>Writing a Kill Bill Catalog involves defining of the following pieces:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Products</strong> - the product is the thing that the customer actually buys (or rents). In the example depicted at the start of the chapter, the product available for rent is a Spy Car. There are actually three different products available, Standard, Sports and Super.</p>
</li>
<li>
<p><strong>Plans</strong> - Plans specify the terms of the Subscription contract. In particular, they define, how much a customer pays for a product, and how often they pay it. For example, we off the the Standard Spy Car product at $100 per month.</p>
</li>
<li>
<p><strong>Plan Phase</strong> (or just <strong>Phase</strong>) - Kill Bill plans can have multiple phases each phase can have a different price and payment term. In this way we can have plans with built in trials or discount phases. Kill Bill automatically handles the transitions between phases. In our example above the plans have two phases, they start with a 30 day trial which is free and then move to a recurring phase at $100 per month.</p>
</li>
<li>
<p><strong>Price List</strong> - A price list is a collection of plans. Price Lists are normally used to group discount plans that are associated with a particular customer group. For example, MI6 might have a special rental terms for their Spy Cars with the C.I.A. In which case they would create a C.I.A. Price List that grouped plans with those special terms together. When C.I.A. Agents come to the rental site, they will see plans from that price list. More importantly if they change plans, for example, if they upgrade from Sports to Super to meet the needs of a particularly difficult mission, they will upgrade to the Sports plan within the C.I.A. Price List.</p>
</li>
<li>
<p><strong>Rules</strong> - The catalog rules determine the behaviour that Kill Bill should display when a plan is created, cancelled or changed.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_catalog_documentation">Catalog Documentation</h5>
<div class="paragraph">
<p>Where do you go from here to learn more:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Basic Catalog Tutorial - how to create a simple three tier catalog with simple rules</p>
</li>
<li>
<p>Advanced Catalog Tutorial - enhancing the Basic Catalog Example with add-ons, discount plans, complex rules and catalog changes</p>
</li>
<li>
<p>Catalog Reference - detailed description of catalog syntax and semantics</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="components-catalog-basic">Basic Catalog Tutorial</h4>
<div class="paragraph">
<p>In this tutorial we set about creating a catalog to represent the Spy Car products illustrated above. The tutorial will go through the creation of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Products</p>
</li>
<li>
<p>Plans</p>
</li>
<li>
<p>Rules</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Someday Kill Bill will have a slick UI for creating and editing Catalogs, but today, Catalogs are represented as XML documents. As we go through the tutorial we will explain the various settings that need to be configured and then give examples and specifics of the XML syntax for representing them.</p>
</div>
<div class="paragraph">
<p>The XML example for this tutorial can be <a href="https://raw.github.com/killbill/killbill/master/catalog/src/test/resources/SpyCarBasic.xml">downloaded in its entirety</a>. The XML schema for Kill Bill documents is available at the canonical location <a href="http://killbilling.org/schema/1.0" class="bare">http://killbilling.org/schema/1.0</a> [need to figure out the right canonical location - version number could correspond to KB version number?]</p>
</div>
<div class="sect4">
<h5 id="_creating_the_catalog">Creating the Catalog</h5>
<div class="paragraph">
<p>In this section we look at getting the top level catalog created and configured.</p>
</div>
<div class="paragraph">
<p>The XML document starts in a standard way. The main tag is “catalog”. Within the catalog opening tag you can specify the schema location. You can use the standard schema location (above) or you can have the code generate the current schema by executing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">java -jar killbill.jar com.ning.billing.catalog.CreateCatalogSchema &lt;filename&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The order of content in the catalog is important. The first tag should be the “effectiveData” (when the catalog becomes effective), then “catalogName” and then “currencies”, as shown below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?&gt;
&lt;catalog xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="CatalogSchema.xsd"&gt;
        &lt;effectiveDate&gt;2013-02-08T00:00:00+00:00&lt;/effectiveDate&gt;
        &lt;catalogName&gt;SpyCarBasic&lt;/catalogName&gt;
        &lt;currencies&gt;
                &lt;currency&gt;USD&lt;/currency&gt;
                &lt;currency&gt;GBP&lt;/currency&gt;
        &lt;/currencies&gt;
        ...
&lt;/catalog&gt;</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_products">Products</h5>
<div class="imageblock">
<div class="content">
<img src="data:image/png:base64," alt="catalog product">
</div>
</div>
<div class="paragraph">
<p>The Product is a representation of the thing the customer is actually buying. Specifying a Product is very straightforward it has the following parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Name - this is a string that is used to refer to the Product elsewhere in the catalog. For example “Super”</p>
</li>
<li>
<p>Category - The Product Category determines how Kill Bill allows the combining of products within a bundle. Kill Bill supports three categories of product: BASE, ADD_ON and STANDALONE.</p>
</li>
<li>
<p>Inclusion/Exclusion lists (optional) - these determine which addons can be purchased with a given base plan. This is a topic dealt with in the Advanced Tutorial [link]</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_rules">Rules</h5>
<div class="paragraph">
<p>The rules section of the catalog allows the definition of different Kill Bill behaviours for the creation, cancellation and changing  of Plans. For an in-depth description of the rules read the Advanced Tutorial [link]. Here we provide the most simple rule set possible.</p>
</div>
<div class="paragraph">
<p>Kill Bill requires that there is defined a default rule for each rule type. The rules are applied by matching cases, if there are no cases matching a particular situation then the default rule is applied. It is important to have a default rule even if you don’t expect to use it just to ensure that you cover all possible cases.</p>
</div>
<div class="paragraph">
<p>In this example we specify the following default for the following rule types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Change Policy [IMMEDIATE] - This is the policy used to determine when to apply a plan change. The policy IMMEDIATE, states that all plan changes will be applied exactly at the time the plan change is requested.</p>
</li>
<li>
<p>Change Alignment [START_OF_BUNDLE] - The change alignment determines how the new plan phases should line up against the old plan phases. This policy says that plan phases should always line up with the start of the bundle. This would mean, for example, that if you have a 30 day trial on all your plans, the customer can move back and forth between different plans many times but since the start of the phases always aligns to the start of the bundle all the trial phases will end at the same time, 30 days from the original start.</p>
</li>
<li>
<p>Cancel Policy [IMMEDIATE] - this determines when a plan is cancelled. The policy chosen here means that it is always cancelled at the time Kill Bill receives the request.</p>
</li>
<li>
<p>Create Alignment [START_OF_BUNDLE] - This determines the way phase of a newly created add-on plan should be aligned. Our choice of START_OF_BUNDLE means that any trials associated with the add on plans would align with the trials of the base plans. Of course, in this example we don’t have any add-ons yet so the choice is irrelevant.</p>
</li>
<li>
<p>Billing Alignment [ACCOUNT] - Different plans can be billed on different cycles. The billing alignment ACCOUNT means that the billing will always line up with the Bill Cycle Day of the customer Account.</p>
</li>
<li>
<p>Price List [DEFAULT] - as customers change plan there may be business rules about which Price List should be used to determine the new plan. This rule set allows us to express those rules. In this case we say that every change takes us to the DEFAULT Price List.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml" data-lang="xml">&lt;rules&gt;
    &lt;changePolicy&gt;
        &lt;changePolicyCase&gt;
            &lt;policy&gt;IMMEDIATE&lt;/policy&gt;
        &lt;/changePolicyCase&gt;
    &lt;/changePolicy&gt;
    &lt;changeAlignment&gt;
       &lt;changeAlignmentCase&gt;
            &lt;alignment&gt;START_OF_BUNDLE&lt;/alignment&gt;
        &lt;/changeAlignmentCase&gt;
    &lt;/changeAlignment&gt;
    &lt;cancelPolicy&gt;
        &lt;cancelPolicyCase&gt;
            &lt;policy&gt;IMMEDIATE&lt;/policy&gt;
        &lt;/cancelPolicyCase&gt;
    &lt;/cancelPolicy&gt;
    &lt;createAlignment&gt;
        &lt;createAlignmentCase&gt;
            &lt;alignment&gt;START_OF_BUNDLE&lt;/alignment&gt;
        &lt;/createAlignmentCase&gt;
    &lt;/createAlignment&gt;
    &lt;billingAlignment&gt;
        &lt;billingAlignmentCase&gt;
            &lt;alignment&gt;ACCOUNT&lt;/alignment&gt;
        &lt;/billingAlignmentCase&gt;
    &lt;/billingAlignment&gt;
    &lt;priceList&gt;
       &lt;priceListCase&gt;
            &lt;toPriceList&gt;DEFAULT&lt;/toPriceList&gt;
       &lt;/priceListCase&gt;
    &lt;/priceList&gt;
&lt;/rules&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_plans">Plans</h4>
<div class="imageblock">
<div class="content">
<img src="data:image/png:base64," alt="catalog plan">
</div>
</div>
<div class="paragraph">
<p>Each Plan has a name and refers to the purchase of a single product. Beyond that the Plans parameters are arranged by phase. In the illustration above we are showing a Plan with a 30 day Trial followed by an unlimited recurring phase. We often use the term “Evergreen” to refer to phase like this. For each phase of the plan we need to specify:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Phase Type - can be one of TRIAL, DISCOUNT, FIXEDTERM, EVERGREEN</p>
</li>
<li>
<p>Duration - the length of the phase in days, months, years or UNLIMITED</p>
</li>
<li>
<p>Billing Period - how frequently do we want to collect payments for this phase, can be MONTHLY, QUARTERLY, ANNUAL or NO_BILLING_PERIOD</p>
</li>
<li>
<p>Recurring Price - the recurring price that needs to be paid every billing period (unless no billing period was specified). The price needs to specify numeric values for every currency that the catalog supports.</p>
</li>
<li>
<p>Fixed Price - a fixed price charged at the beginning of the period in addition to the recurring price. This is also a multi currency price and must be specified for all currencies.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When durations are specified in days Kill Bill will not allow a recurring price. This is just because months and years do not have fixed numbers of days and attempting to charge a recurring fee over a fixed period of days can lead to strange proration fees at the end of the period.</p>
</div>
<div class="paragraph">
<p>For our example Spy Car catalog we specify three plans with two phases:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The first phase is of type Trial has a duration of 30 days a Billing Period set to “NO_BILLING_PERIOD”. There is no recurring price specified, and a Fixed Price of £0/$0.</p>
</li>
<li>
<p>The second phase is of type Evergreen has a Duration of UNLIMITED, a Billing Period of MONTHLY and recurring price of £75/$100 (or whatever is appropriate for the Product).</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml" data-lang="xml">&lt;plans&gt;
     &lt;plan name="standard-monthly"&gt;
         &lt;product&gt;Standard&lt;/product&gt;
         &lt;initialPhases&gt;
             &lt;phase type="TRIAL"&gt;
                 &lt;duration&gt;
                     &lt;unit&gt;DAYS&lt;/unit&gt;
                     &lt;number&gt;30&lt;/number&gt;
                 &lt;/duration&gt;
                 &lt;billingPeriod&gt;NO_BILLING_PERIOD&lt;/billingPeriod&gt;
                 &lt;fixedPrice&gt; &lt;!-- empty price implies $0 --&gt;
                 &lt;/fixedPrice&gt;
             &lt;/phase&gt;
         &lt;/initialPhases&gt;
         &lt;finalPhase type="EVERGREEN"&gt;
             &lt;duration&gt;
                 &lt;unit&gt;UNLIMITED&lt;/unit&gt;
             &lt;/duration&gt;
             &lt;billingPeriod&gt;MONTHLY&lt;/billingPeriod&gt;
             &lt;recurringPrice&gt;
                 &lt;price&gt;
                      &lt;currency&gt;GBP&lt;/currency&gt;
                      &lt;value&gt;75.00&lt;/value&gt;
                 &lt;/price&gt;
                 &lt;price&gt;
                      &lt;currency&gt;USD&lt;/currency&gt;
                      &lt;value&gt;100.00&lt;/value&gt;
                  &lt;/price&gt;
             &lt;/recurringPrice&gt;
         &lt;/finalPhase&gt;
     &lt;/plan&gt;
     ...
&lt;/plans&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_price_list">Price list</h4>
<div class="imageblock">
<div class="content">
<img src="data:image/png:base64," alt="catalog pricelist">
</div>
</div>
<div class="paragraph">
<p>Price Lists are collections of Plans that are grouped for selection or interchange they are used for identifying discount pricing for presentation to a particular customer group. In the example illustrated above we are supposing that MI6 is providing rental Spy Cars at special pricing levels for C.I.A. agents and former K.G.B. agents. The topic of Price Lists will be dealt with in more detail in the Advanced Tutorial [link].</p>
</div>
<div class="paragraph">
<p>Kill Bill requires at least one special Price List to be defined, called the default price list. In our example, it contains all three example Plans.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml" data-lang="xml">&lt;priceLists&gt;
    &lt;defaultPriceList name="DEFAULT"&gt;
        &lt;plans&gt;
            &lt;plan&gt;standard-monthly&lt;/plan&gt;
            &lt;plan&gt;sports-monthly&lt;/plan&gt;
            &lt;plan&gt;super-monthly&lt;/plan&gt;
        &lt;/plans&gt;
    &lt;/defaultPriceList&gt;
&lt;/priceLists&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="components-catalog-advanced">Advanced Catalog Tutorial</h4>
<div class="sect4">
<h5 id="_overview">Overview</h5>
<div class="paragraph">
<p>This tutorial builds on the Basic Tutorial to illustrate the more advanced features of the Kill Bill Catalog. The XML example for this tutorial can be <a href="https://raw.github.com/killbill/killbill/master/catalog/src/test/resources/SpyCarAdvanced.xml">downloaded in its entirety</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_add_ons">Add-ons</h5>
<div class="paragraph">
<p>Having an explicit representation of Add-On products allows Kill Bill to be configured to only allow purchases of add-ons with particular base plans, and to trigger appropriate cancellations automatically when the base plan changes.</p>
</div>
<div class="paragraph">
<p>Kill Bill supports three categories of products:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Base Products</p>
</li>
<li>
<p>Add-On Products</p>
</li>
<li>
<p>Standalone Products</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The terms Base Plan, Add-on Plan and Standalone Plan represent plans that are associated with these three types of product respectively.</p>
</div>
<div class="paragraph">
<p>A Subscription Bundle is a collection of subscriptions that correspond to an individual product instance, such as all the subscriptions associated with a single cell phone, or, in our example catalog all the subscriptions associated with the rental of Spy Car.</p>
</div>
<div class="paragraph">
<p>Subscription Bundles can either consist of a collection of subscriptions to stand-alone plans or a single Base Plan subscription with zero or more Add-On Plan subscriptions.</p>
</div>
<div class="paragraph">
<p>The Kill Bill catalog allows you to specify the inclusion and availability of Add-On Products with associated Base Products.</p>
</div>
<div class="paragraph">
<p>For example, suppose that we create some add-on products for our example catalog. Lets add an OilSlick Product and a RemoteControl Product. Now, let discuss the availability and inclusion of these:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Neither of the products is available in the Standard Plan, meaning that you can’t purchase either of these add-ons if you are on Standard.</p>
</li>
<li>
<p>Both products are available on the Sports Plan.</p>
</li>
<li>
<p>RemoteControl is available on the Super Plan, but as we can see from the original Plan definition, OilSlick is already included in the Super Plan.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If we have this specified in the catalog then Kill Bill knows to disallow certain purchases, e.g. it will not allow the purchase of an OilSlick add-on in a Bundle with a Standard Base Plan. Similarly if the Base Plan in a Bundle containing Super and RemoteControl is downgraded to Standard, Kill Bill knows to automatically cancel the RemoteControl Add-On since it is no longer available. Finally, if the Base Plan of a Bundle containing Sports and OilSlick is upgraded to Super, Kill Bill knows to cancel the OilSlick Plan because its features are already included, by default, in the new Base Plan.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml" data-lang="xml">&lt;products&gt;
    &lt;product name="Standard"&gt;
        &lt;category&gt;BASE&lt;/category&gt;
    &lt;/product&gt;
    &lt;product name="Sports"&gt;
        &lt;category&gt;BASE&lt;/category&gt;
        &lt;available&gt;
            &lt;addonProduct&gt;OilSlick&lt;/addonProduct&gt;
            &lt;addonProduct&gt;RemoteControl&lt;/addonProduct&gt;
        &lt;/available&gt;
    &lt;/product&gt;
    &lt;product name="Super"&gt;
        &lt;category&gt;BASE&lt;/category&gt;
        &lt;included&gt;
            &lt;addonProduct&gt;OilSlick&lt;/addonProduct&gt;
        &lt;/included&gt;
        &lt;available&gt;
            &lt;addonProduct&gt;RemoteControl&lt;/addonProduct&gt;
        &lt;/available&gt;
    &lt;/product&gt;
    &lt;product name="OilSlick"&gt;
        &lt;category&gt;ADD_ON&lt;/category&gt;
    &lt;/product&gt;
    &lt;product name="RemoteControl"&gt;
        &lt;category&gt;ADD_ON&lt;/category&gt;
    &lt;/product&gt;
&lt;/products&gt;</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_price_lists">Price lists</h5>
<div class="imageblock">
<div class="content">
<img src="data:image/png:base64," alt="catalog pricelist">
</div>
</div>
<div class="paragraph">
<p>Price Lists are collections of Plans, usually associated with a promotion or discount package.</p>
</div>
<div class="paragraph">
<p>For example, we might offer special rates on our Spy Car rental package for C.I.A. Agents, which offers 33% off for the first 3 months of hire. To do this, we create plans similar to the ones we have already. They should have the same trial phase and the same evergreen phase, but we insert a new discount phase which, for 3 months, charges the appropriate discount</p>
</div>
<div class="paragraph">
<p>In this example we consider only the first of the three additional plans.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml" data-lang="xml">&lt;plan name="discount-standard-monthly"&gt;
    &lt;product&gt;Standard&lt;/product&gt;
    &lt;initialPhases&gt;
        &lt;phase type="TRIAL"&gt;
            &lt;duration&gt;
                &lt;unit&gt;DAYS&lt;/unit&gt;
                &lt;number&gt;30&lt;/number&gt;
            &lt;/duration&gt;
        &lt;billingPeriod&gt;NO_BILLING_PERIOD&lt;/billingPeriod&gt;
            &lt;fixedPrice&gt; &lt;!-- empty price implies $0 --&gt;
            &lt;/fixedPrice&gt;
        &lt;/phase&gt;
        &lt;phase type="DISCOUNT"&gt;
            &lt;duration&gt;
                &lt;unit&gt;MONTHS&lt;/unit&gt;
                &lt;number&gt;3&lt;/number&gt;
            &lt;/duration&gt;
            &lt;billingPeriod&gt;MONTHLY&lt;/billingPeriod&gt;
            &lt;recurringPrice&gt;
                &lt;price&gt;
                    &lt;currency&gt;GBP&lt;/currency&gt;
                    &lt;value&gt;50.00&lt;/value&gt;
                &lt;/price&gt;
                &lt;price&gt;
                    &lt;currency&gt;USD&lt;/currency&gt;
                    &lt;value&gt;66.00&lt;/value&gt;
                &lt;/price&gt;
            &lt;/recurringPrice&gt;
        &lt;/phase&gt;
    &lt;/initialPhases&gt;
    &lt;finalPhase type="EVERGREEN"&gt;
        &lt;duration&gt;
            &lt;unit&gt;UNLIMITED&lt;/unit&gt;
        &lt;/duration&gt;
        &lt;billingPeriod&gt;MONTHLY&lt;/billingPeriod&gt;
        &lt;recurringPrice&gt;
            &lt;price&gt;
                &lt;currency&gt;GBP&lt;/currency&gt;
                &lt;value&gt;75.00&lt;/value&gt;
            &lt;/price&gt;
            &lt;price&gt;
                &lt;currency&gt;USD&lt;/currency&gt;
                &lt;value&gt;100.00&lt;/value&gt;
            &lt;/price&gt;
        &lt;/recurringPrice&gt;
    &lt;/finalPhase&gt;
&lt;/plan&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once our additional plans have been created, we can add the new pricelist, after the default price list:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml" data-lang="xml">&lt;priceLists&gt;
    &lt;defaultPriceList name="DEFAULT"&gt;
        &lt;plans&gt;
            &lt;plan&gt;standard-monthly&lt;/plan&gt;
            &lt;plan&gt;sports-monthly&lt;/plan&gt;
            &lt;plan&gt;super-monthly&lt;/plan&gt;
        &lt;/plans&gt;
    &lt;/defaultPriceList&gt;
    &lt;childPriceList name="CIA"&gt;
        &lt;plans&gt;
            &lt;plan&gt;discount-standard-monthly&lt;/plan&gt;
            &lt;plan&gt;discount-sports-monthly&lt;/plan&gt;
            &lt;plan&gt;discount-super-monthly&lt;/plan&gt;
        &lt;/plans&gt;
    &lt;/childPriceList&gt;
&lt;/priceLists&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The alignment and price list change rules can be used to specify the behaviour to use when changing pricelists. In the example above, we would expect customers to be able to upgrade and downgrade within the discount phase of the subscription and stay in the discounted price list. We refer to this as a “sticky” price list. Kill Bill can also support “non-sticky” price lists, in which plan changes cause the customer to drop out of the pricelist that the are in and move to a different one (usually the Default). In the section on rules we explain how to configure these properties.</p>
</div>
</div>
<div class="sect4">
<h5 id="_rules_2">Rules</h5>
<div class="paragraph">
<p>There several different <strong>Rules</strong> that can be configured in the Kill Bill Catalog. Each Rule answers a specific question. For example, one of the Rules answers the question "When should this plan change be applied?". Suppose Kill Bill receives a request for a subscription to have its plan upgraded, Kill Bill will check the rules, and based on the current plan, the phase it is in, the new plan etc. Kill Bill can determine whether the transition should happen immediately, or be deferred until later.</p>
</div>
<div class="paragraph">
<p>Rules consist of a series of Cases, each case is represented by a Predicate and a Result. Rules are evaluated against a Context. Each case is examined in order, and the Predicate for that Case is compared to the Context. If the Predicate is satisfied by the context, then the Result of that Case is applied.</p>
</div>
<div class="paragraph">
<p>For example, consider the following rule for the timing of applying a plan change:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Predicate: phaseType=TRIAL ; Result: IMMEDIATE</p>
</li>
<li>
<p>Predicate: phaseType=Evergreen AND fromProduct=Sports AND toProduct=Standard ; Result: END_OF_TERM</p>
</li>
<li>
<p>Predicate: ; Result: END_OF_TERM</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In this example there are three cases. The cases are evaluated from first to last and the first case for which the predicate matches the context is the one that is successful.</p>
</div>
<div class="paragraph">
<p>Consider following Context:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">phaseType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EVERGREEN</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">fromProduct</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sports</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">fromProductCategory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BASE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">fromBillingPeriod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MONTHLY</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">fromPriceList</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DEFAULT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">toProduct</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Standard</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">toProductCategory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BASE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">toBillingPeriod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MONTHLY</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">toPriceList</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DEFAULT</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>To evaluate the Rule against this Context, we start by considering Case 1. The predicate in Case 1 requires that PhaseType=TRIAL, but the first line of our context has phaseType set to EVERGREEN, so Case 1 fails. However, when we consider Case 2, all the predicate clauses are satisfied by the above context: phaseType=Evergreen, fromProduct=Sports and toProduct=Standard. So, Case 2 succeeds and the Rule evaluates to "END_OF_TERM".</p>
</div>
<div class="paragraph">
<p>Notice that the predicates only need to specify the values of some of the fields in the context. Fields that are omitted in a predicate can take any value. For this reason Case 3 is a catch-all Case. It always succeeds because the predicate has no clauses so it will succeed with any Context.</p>
</div>
<div class="paragraph">
<p>The XML for the above rules is given below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml" data-lang="xml">&lt;rules&gt;
...
    &lt;changePolicy&gt;
        &lt;changePolicyCase&gt;
            &lt;phaseType&gt;TRIAL&lt;/phaseType&gt;
            &lt;policy&gt;IMMEDIATE&lt;/policy&gt;
        &lt;/changePolicyCase&gt;
        &lt;changePolicyCase&gt;
            &lt;phaseType&gt;EVERGREEN&lt;/phaseType&gt;
            &lt;fromProduct&gt;Sports&lt;/fromProduct&gt;
            &lt;toProduct&gt;Standard&lt;/toProduct&gt;
            &lt;policy&gt;END_OF_TERM&lt;/policy&gt;
        &lt;/changePolicyCase&gt;
        &lt;changePolicyCase&gt;
            &lt;policy&gt;END_OF_TERM&lt;/policy&gt;
        &lt;/changePolicyCase&gt;
    &lt;/changePolicy&gt;
...
&lt;/rules&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>There are three types of Context:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Creation Context - provides the context for a new subscription</p>
</li>
<li>
<p>Subscription Context - this provides the context of an existing subscription, including details of the plan, phase, pricelist, product etc.</p>
</li>
<li>
<p>Change Context - this is used in the event of a plan change provides context not only about the phase of the correct subscription but also details of the new target plan.</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Creation Context</th>
<th class="tableblock halign-left valign-top">Subscription Context</th>
<th class="tableblock halign-left valign-top">Change Context</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">product</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">product</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">phaseType</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">productCategory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">productCategory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">fromProduct</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">billingPeriod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">billingPeriod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">fromProductCategory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">priceList</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">priceList</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">fromBillingPeriod</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">phaseType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">fromPriceList</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">toProduct</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">toProductCategory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">toBillingPeriod</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">toPriceList</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In the remainder of this section we illustrate each type of rule supported by the system.</p>
</div>
<div class="sect5">
<h6 id="_rule_plan_creation_billing_alignment">Rule: Plan Creation Billing Alignment</h6>
<div class="paragraph">
<p>This rule uses the Creation Context and configures type of billing alignment used with a subscription. There are three kinds of alignment available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ACCOUNT - this means that the billing cycle of the subscription will be lined up with the bill cycle day of the account. In some cases this is undesirable because it means that a proration charge will be applied on first billing to line up the cycles.</p>
</li>
<li>
<p>SUBSCRIPTION - this alignment will cause the subscriptions bill cycle to line up with the first bill day of the subscription plan. So, if the subscription starts on January 3rd and has a 15 day free trial, the first billed day with be January 18th and the bill cycle day for the subscription will be set to 18.</p>
</li>
<li>
<p>BUNDLE - setting the alignment to bundle is useful for add-ons because it sets the bill cycle day to be aligned with whatever the base plan is using.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Predicate: productCategory=ADD_ON ; Result: BUNDLE</p>
</li>
<li>
<p>Predicate: billingPeriod=MONTH ; Result: ACCOUNT</p>
</li>
<li>
<p>Predicate: billingPeriod=ANNUAL ; Result: SUBSCRIPTION</p>
</li>
<li>
<p>Predicate: ; Result: ACCOUNT</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This example will align addons with the base plan, monthlies to the Account bill cycle day and annuals to their first billed day. Anything else is aligned with the Account.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml" data-lang="xml">&lt;billingAlignment&gt;
    &lt;billingAlignmentCase&gt;
        &lt;productCategory&gt;ADD_ON&lt;/productCategory&gt;
        &lt;alignment&gt;BUNDLE&lt;/alignment&gt;
    &lt;/billingAlignmentCase&gt;
    &lt;billingAlignmentCase&gt;
        &lt;billingPeriod&gt;ANNUAL&lt;/billingPeriod&gt;
        &lt;alignment&gt;ACCOUNT&lt;/alignment&gt;
    &lt;/billingAlignmentCase&gt;
    &lt;billingAlignmentCase&gt;
        &lt;billingPeriod&gt;ANNUAL&lt;/billingPeriod&gt;
        &lt;alignment&gt;SUBSCRIPTION&lt;/alignment&gt;
    &lt;/billingAlignmentCase&gt;
    &lt;billingAlignmentCase&gt;
        &lt;alignment&gt;ACCOUNT&lt;/alignment&gt;
    &lt;/billingAlignmentCase&gt;
&lt;/billingAlignment&gt;</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_rule_plan_creation_add_on_phase_alignment">Rule: Plan Creation Add-On Phase Alignment</h6>
<div class="paragraph">
<p>This rule also uses the Creation Context and determines how the phases of an Add-On plan aligns with an existing subscription.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/png:base64," alt="catalog addon alignment">
</div>
</div>
<div class="paragraph">
<p>There are two choices (illustrated above):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>START_OF_BUNDLE - causes the phases of the add on to start on the date when the base plan was first created. This is useful if you want to allow add-on trials during the trial phase of the base plan only. The add on plans must have a trial of the same length as the base plan and then the trials will expire at the same time whenever the add-on is created.</p>
</li>
<li>
<p>START_OF_SUBSCRIPTION - this causes the phases of the add-on to start when the add-on subscription is created. This is useful if you want to allow add-ons to have trials that are occur independently of the base plan.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Predicate: product=OilSlick ; Result: START_OF_BUNDLE</p>
</li>
<li>
<p>Predicate: product=RemoteControl ; Result: START_OF_SUBSCRIPTION</p>
</li>
<li>
<p>Predicate: ; Result: START_OF_BUNDLE</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In this example the product “OilSlick” is aligned to the START_OF_BUNDLE and the product “RemoteControl” is aligned to START_OF_SUBSCRIPTION. The default for anything else is START_OF_BUNDLE.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml" data-lang="xml">&lt;createAlignment&gt;
    &lt;createAlignmentCase&gt;
        &lt;product&gt;OilSlick&lt;/product&gt;
        &lt;alignment&gt;START_OF_BUNDLE&lt;/alignment&gt;
    &lt;/createAlignmentCase&gt;
    &lt;createAlignmentCase&gt;
        &lt;product&gt;RemoteControl&lt;/product&gt;
        &lt;alignment&gt;START_OF_SUBSCRIPTION&lt;/alignment&gt;
    &lt;/createAlignmentCase&gt;
    &lt;createAlignmentCase&gt;
        &lt;alignment&gt;START_OF_BUNDLE&lt;/alignment&gt;
    &lt;/createAlignmentCase&gt;
&lt;/createAlignment&gt;</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_rule_plan_cancellation_timing">Rule: Plan Cancellation Timing</h6>
<div class="paragraph">
<p>This rule is uses the Phase Context and is used to specify when a cancellation should occur.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/png:base64," alt="catalog cancellation timing">
</div>
</div>
<div class="paragraph">
<p>There are two options (illustrated above):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>END_OF_TERM - meaning that the cancellation will be applied at the end of the billed period. This is typical in a situation where refunds are not given.</p>
</li>
<li>
<p>IMMEDIATE - meaning that the cancellation will be applied immediately and the customer credited with the balance of the subscription that they have paid for but not yet used.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Predicate: productCategory=BASE ; Result: END_OF_TERM</p>
</li>
<li>
<p>Predicate: productCategory=ADD_ON ; Result: IMMEDIATE</p>
</li>
<li>
<p>Predicate: ; Result: END_OF_TERM</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In this example base plans are cancelled at the end of their term, add-on plans are cancelled immediately.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml" data-lang="xml">&lt;cancelPolicy&gt;
    &lt;cancelPolicyCase&gt;
        &lt;productCategory&gt;BASE&lt;/productCategory&gt;
        &lt;policy&gt;END_OF_TERM&lt;/policy&gt;
    &lt;/cancelPolicyCase&gt;
    &lt;cancelPolicyCase&gt;
        &lt;productCategory&gt;ADD_ON&lt;/productCategory&gt;
        &lt;policy&gt;IMMEDIATE&lt;/policy&gt;
    &lt;/cancelPolicyCase&gt;
    &lt;cancelPolicyCase&gt;
        &lt;policy&gt;END_OF_TERM&lt;/policy&gt;
    &lt;/cancelPolicyCase&gt;
&lt;/cancelPolicy&gt;</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_rule_plan_change_timing">Rule: Plan Change Timing</h6>
<div class="paragraph">
<p>This rule uses the Change Context and, like the cancellation rule above, specifies when a plan change should occur.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="data:image/png:base64," alt="catalog change timing">
</div>
</div>
<div class="paragraph">
<p>There are three options (two of which are illustrated above):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>END_OF_TERM - specifies that the change should happen at the end of the current billed period.</p>
</li>
<li>
<p>IMMEDIATE - specifies that the change should happen when requested.</p>
</li>
<li>
<p>ILLEGAL - plan change is not allowed (not illustrated).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Predicate: phaseType=TRIAL ; Result: IMMEDIATE</p>
</li>
<li>
<p>Predicate: fromProduct=Standard AND toProduct=Sports ; Result: IMMEDIATE</p>
</li>
<li>
<p>Predicate: toProduct=Super ; Result: IMMEDIATE</p>
</li>
<li>
<p>Predicate: ; Result: END_OF_TERM</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In this example we specify that trials and upgrades occur immediately, anything else is to occur at end of term.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml" data-lang="xml">&lt;changePolicy&gt;
    &lt;changePolicyCase&gt;
        &lt;phaseType&gt;TRIAL&lt;/phaseType&gt;
        &lt;policy&gt;IMMEDIATE&lt;/policy&gt;
    &lt;/changePolicyCase&gt;
    &lt;changePolicyCase&gt;
        &lt;fromProduct&gt;Standard&lt;/fromProduct&gt;
        &lt;toProduct&gt;Sports&lt;/toProduct&gt;
        &lt;policy&gt;IMMEDIATE&lt;/policy&gt;
    &lt;/changePolicyCase&gt;
    &lt;changePolicyCase&gt;
        &lt;toProduct&gt;Super&lt;/toProduct&gt;
        &lt;policy&gt;IMMEDIATE&lt;/policy&gt;
    &lt;/changePolicyCase&gt;
    &lt;changePolicyCase&gt;
        &lt;policy&gt;END_OF_TERM&lt;/policy&gt;
    &lt;/changePolicyCase&gt;
&lt;/changePolicy&gt;</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_rule_plan_change_phase_alignment">Rule: Plan Change Phase Alignment</h6>
<div class="paragraph">
<p>In "Plan Creation Add-on Phase Alignment" we specified how to align the phases of an add-on with a base plan. This rule, which uses the Change Context, specifies how the phases of a new plan should align with the phases of the existing plan when a plan is changed.</p>
</div>
<div class="paragraph">
<p>There are four options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>START_OF_SUBSCRIPTION - The plan phases start with the start of the subscription. This is the most common alignment and applies in most situations.</p>
</li>
<li>
<p>START_OF_BUNDLE - The plan phases should align with the start of the base subscription.</p>
</li>
<li>
<p>CHANGE_OF_PLAN - The plan phases start at the time of the change</p>
</li>
<li>
<p>CHANGE_OF_PRICELIST - The plan phases start at the time of the last change of price list</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Predicate: toProductCategory=ADD_ON ; Result: START_OF_BUNDLE</p>
</li>
<li>
<p>Predicate: toPriceList=SpecialDiscount ; Result: CHANGE_OF_PRICELIST</p>
</li>
<li>
<p>Predicate: ; Result: START_OF_SUBSCRIPTION</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml" data-lang="xml">&lt;changeAlignment&gt;
    &lt;changeAlignmentCase&gt;
        &lt;toProductCategory&gt;ADD_ON&lt;/toProductCategory&gt;
        &lt;alignment&gt;START_OF_BUNDLE&lt;/alignment&gt;
    &lt;/changeAlignmentCase&gt;
    &lt;changeAlignmentCase&gt;
        &lt;fromPriceList&gt;SpecialDiscount&lt;/fromPriceList&gt;
        &lt;toPriceList&gt;SpecialDiscount&lt;/toPriceList&gt;
        &lt;alignment&gt;CHANGE_OF_PRICELIST&lt;/alignment&gt;
    &lt;/changeAlignmentCase&gt;
    &lt;changeAlignmentCase&gt;
        &lt;alignment&gt;START_OF_SUBSCRIPTION&lt;/alignment&gt;
    &lt;/changeAlignmentCase&gt;
&lt;/changeAlignment&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, addon changes are aligned to the start of the bundle, changes to the SpecialDiscount price list are aligned to that change and everything else aligns to the start of the subscription.</p>
</div>
</div>
<div class="sect5">
<h6 id="_rule_plan_change_price_list_choice">Rule: Plan Change Price List Choice</h6>
<div class="paragraph">
<p>This rule uses the Change Context and specifies which pricelist should be chosen for specific changes. The rule allows us to configure whether a price list is "sticky" or not.</p>
</div>
<div class="paragraph">
<p>For example, suppose we have affiliate pricelist with special prices for members of the CIA for Spy Car rental. Lets say that this price list offers a 30% discount for the first 3 months of rental.</p>
</div>
<div class="paragraph">
<p>Now, Special Agent Mills from the CIA subscribes to a Sports on that price list. However, 1 month after renting the car his daughter is kidnapped he needs additional capabilities and decides to upgrade to a Super. Since he bought the original subscription on a special offer that still has two months to run we would expect the upgrade to put him into the corresponding 30% off Super plan and give him a further 2 months at that price. This is a “sticky” price list.</p>
</div>
<div class="paragraph">
<p>Alternatively, consider long term customer 003 who has been renting the Supr for the last 4 years but decides that she wants to save money and calls to downgrade her plan. our representative offers her a special Rescue Pricing plan that gives her 40% off for the next year and she decides to take it. However, a month later she changes her mind and decides to downgrade anyway. In this situation we want her to downgrade to the default price plan. This is a "non-sticky" price list.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Predicate: fromPriceList=CIA ; Result: CIA</p>
</li>
<li>
<p>Predicate: fromPriceList=SpecialDiscount ; Result: DEFAULT</p>
</li>
<li>
<p>Predicate: ; Result: DEFAULT</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml" data-lang="xml">&lt;priceList&gt;
   &lt;priceListCase&gt;
        &lt;fromPriceList&gt;SpecialDiscount&lt;/fromPriceList&gt;
        &lt;toPriceList&gt;DEFAULT&lt;/toPriceList&gt;
    &lt;/priceListCase&gt;
   &lt;priceListCase&gt;
        &lt;fromPriceList&gt;CIA&lt;/fromPriceList&gt;
        &lt;toPriceList&gt;CIA&lt;/toPriceList&gt;
    &lt;/priceListCase&gt;
   &lt;priceListCase&gt;
        &lt;toPriceList&gt;DEFAULT&lt;/toPriceList&gt;
    &lt;/priceListCase&gt;
&lt;/priceList&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_catalog_changes">Catalog changes</h5>
<div class="paragraph">
<p>This far in the discussion we have been considering single stand-alone catalogs, but Kill Bill allows the catalog to be modified over time. This is done by creating a set of catalogs with effectiveDates through time. Each catalog is superseded by the next. In this way we can change prices, add new Plans, Products, Price Lists etc, retire Plans, Products, Price Lists etc.</p>
</div>
<div class="paragraph">
<p>Note that the catalog does not allow the removal of objects. Only additions and certain modifications are allowed. Objects can be retired which means that they cannot be applied to new subscriptions. However existing subscriptions will still refer to them.</p>
</div>
<div class="sect5">
<h6 id="_deferred_price_change">Deferred Price Change</h6>
<div class="paragraph">
<p>Kill Bill supports the ability to make a price change to a plan that applies based on the catalog effective date for new purchases, but which is deferred for existing subscriptions. It is often the case that existing customers will need a notice period before prices are changed but you need to deliver the new prices to new purchases as soon as the change is announced.</p>
</div>
<div class="paragraph">
<p>This feature uses the field effectiveDateForExistingSubscriptons that is included on Plans. The semantics is simply that the changes to that plan will only take effect for existing subscriptions, after that date.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="components-entitlement">Subscription and Entitlement</h3>
<div class="sect3">
<h4 id="_overview_2">Overview</h4>
<div class="paragraph">
<p>The Kill Bill entitlement system primarily offers an API for users to manage their subscriptions: The API allows a user to subscribe to a new product, change, pause, resume or cancel its existing subscriptions. Upon each of those API calls there are really two distincts set of operations that occur in the system:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>There is an entitlement change that occurs; for instance upon creation, the user gains access to what she subscribed for, or in the case of cancellation she loses its access. The primary goal of that API is to give great flexibility through the use of dates or entitlement policies as to when things should start/stop,&#8230;&#8203;</p>
</li>
<li>
<p>As a consequence of the entitlement operation, the system will also calculate the changes that should occur on the billing side. It is important to understand that the entitlement operation has an impact on billing, so the two are connected, but they are not necessarily aligned.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The philosophy behind that API is that the user (of the API) should be able to drive the entitlement so that it matches exactly its needs and let the system computes the billing aspect based on the policies that were configured in the system. Example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>First an administrator could configure Kill Bill to never generate credit for a particular product 'P'.</p>
</li>
<li>
<p>A customer comes in, subscribes to that product, gets invoiced&#8230;&#8203;</p>
</li>
<li>
<p>At a later date the customer decides that he no longer wants to use the product 'P' and so he decides to cancel that subscription immediately. From an entitlement point of view, the end date is now and so, as soon as the call returns, the customer loses access to its product 'P'.</p>
</li>
<li>
<p>However from a billing point of view, and because the administrator decided to configure the system that way, the end date will be calculated by the system to match the end date of the last period invoiced, also referred to as charged through date (CTD), and that way there is no generated credit for that cancellation.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>So, as a general rule, the administrator deals with the billing policies, and the user of the API controls the detail of its entitlement(s). The entitlement system exposes abstractions that reflect that model:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Entitlement: An entitlement is an abstraction which helps answer the following question: Is the user allowed (entitled) to use this service/product at a given time? So as such, it provides information about the dates where that service started, ended, was paused/resumed along with the specifics about the type of service/product.</p>
</li>
<li>
<p>Subscription: A Subscription is an abstraction that encapsulates the information contained in the Entitlement but also adds additonal billing information, such as the dates at which the billing started, ended. When the system is configured to bill in advance, it also provides the date up to which the customer was invoiced (ChargeThroughDate).</p>
</li>
<li>
<p>SubscriptionBundle: Subscriptions are always part of a SubscriptionBundle. This allows Subscriptions to be grouped together so that specific operations&#8201;&#8212;&#8201;cancellation, change of plan-- on one Subscription may have an impact on the other Subscriptions in the same SubscriptionBundle. There can be at most one Subscription attached to a BASE Category in a SubscriptionBundle but there can be multiple ADD_ON Subscriptions in that same SubscriptionBundle. Typically, a BASE Category is used to make sure that any operation on the BASE Subscription will be reflected on the ADD_ON Susbcriptions in the same SubscriptionBundle.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Previously we laid out the general case where the user of the API controls the Entitlement and Kill Bill manages the billing aspect based on configuration policies. Some specific entitlement APIs also allow you to override the billing policies if this is ever needed.</p>
</div>
</div>
<div class="sect3">
<h4 id="_alignments">Alignments</h4>
<div class="paragraph">
<p>The API allows you to provide the following matrix of combinations:</p>
</div>
<div class="paragraph">
<p>On the horizontal line, we have the various entitlement (ENT) policies or requested cancel date; on the vertical we have the same policies/requested cancel date for the billing side (BILL):</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="data:image/png:base64," alt="Entitlement Matrix Policy">
</div>
</div>
<div class="paragraph">
<p>The diagrams below summarize what happens when a cancellation occurs on a subscription that was billed in advance:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The green line shows the entitlement, and the red cross on that line shows the cancellation as seen by the customer; that is, once we hit the red cross the customer loses access to its entitlement.</p>
</li>
<li>
<p>The red portion below shows the current invoice; by default the customer was invoiced from the start of the period to the end of the period, also referred to as charged through date (CTD).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>While we see that in all cases, cancelling a subscription has both an impact on the entitlement and the billing side, but we also see that those two are not necessarily aligned:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="data:image/png:base64," alt="Entitlement policy scenarii">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="components-invoicing">Invoicing</h3>
<div class="sect3">
<h4 id="components-invoicing">Overview</h4>
<div class="paragraph">
<p>Kill Bill works by triggers (as opposed to batch-oriented systems). Invoices are generated automatically, when:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>there is a change for a subscription (creation, change of plan, cancellation, etc.)</p>
</li>
<li>
<p>on a recurring phase of a subscription, the system detects a recurring charge is due (e.g. monthly recurring subscriptions)</p>
</li>
<li>
<p>an operator either creates an external charge, adjusts a past invoice or triggers a future invoice</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After an invoice has been generated, its balance is positive or zero. If it&#8217;s positive, the customer needs to pay its balance. Each time an invoice would become negative, the system automatically inserts a special item, called credit balance adjustment (CBA), to bring back the balance to zero. That credit is automatically added to the account and used on future invoices. If the invoice is paid, a payment is added against that payment. If that invoice is adjusted later on, a CBA item will be automatically generated and appear on the invoice. Kill Bill invoices are not static, although the items are, i.e. one can add items to past invoices.</p>
</div>
<div class="paragraph">
<p>The various types of invoice items are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>RECURRING: Recurring charge. Used for items with a billing period. This item is always positive or zero</p>
</li>
<li>
<p>FIXED: Fixed (one-time) charge. Used for items without a billing period (non recurring phase, e.g. trials). This item is always positive or zero</p>
</li>
<li>
<p>EXTERNAL_CHARGE: Fixed (one-time) external charge, for items not in the catalog. This item is always positive</p>
</li>
<li>
<p>ITEM_ADJ: Invoice item adjustment, generated by an operator (often associated with a refund). This item is always negative</p>
</li>
<li>
<p>REFUND_ADJ: Invoice level adjustment (against a posted payment). This item is always negative</p>
</li>
<li>
<p>CREDIT_ADJ: Invoice level adjustment (credits), either at the account level (on its own invoice) or against an existing invoice. This item is always negative</p>
</li>
<li>
<p>REPAIR_ADJ: Internal adjustment, generated automatically by the system for an invoice on which the subscription was modified (immediate cancellation or change). The items is always negative</p>
</li>
<li>
<p>CBA_ADJ: Internal adjustment, generated automatically by the system for an invoice which became negative (account level credits). Positive when generating credits, negative when consuming account level credits. The sum of CBA items for an account should always be positive or zero</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Recurring invoice items start and end on the same day of the month. For example, a monthly subscription starting on the 21st will have items for the service period 2012-08-21 to 2012-09-21, 2012-09-21 to 2012-10-21, etc. Fixed items have only a start date and never get pro-rated.</p>
</div>
</div>
<div class="sect3">
<h4 id="components-invoice-items">Invoice items</h4>
<div class="sect4">
<h5 id="_fixed_item">Fixed item</h5>
<div class="paragraph">
<p>An invoice for a subscription on a fixed phase of $0 (trial phase for example) would look like:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 16%;">
<col style="width: 16%;">
<col style="width: 16%;">
<col style="width: 16%;">
<col style="width: 16%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Invoice #</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Amount</th>
<th class="tableblock halign-left valign-top">Start date</th>
<th class="tableblock halign-left valign-top">End date</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1028</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FIXED</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Silver trial</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-03-10</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_recurring_item">Recurring item</h5>
<div class="paragraph">
<p>An invoice for a subscription on a recurring phase of $20 would look like:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 16%;">
<col style="width: 16%;">
<col style="width: 16%;">
<col style="width: 16%;">
<col style="width: 16%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Invoice #</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Amount</th>
<th class="tableblock halign-left valign-top">Start date</th>
<th class="tableblock halign-left valign-top">End date</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1029</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RECURRING</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Silver monthly</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-04-11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-05-11</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_plan_changes">Plan changes</h5>
<div class="paragraph">
<p>If the user upgrades on 2013-04-26 (halfway through the month), the invoice would be repaired as follow (the CBA_ADJ item assumes the invoice was paid in full):</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 16%;">
<col style="width: 16%;">
<col style="width: 16%;">
<col style="width: 16%;">
<col style="width: 16%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Invoice #</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Amount</th>
<th class="tableblock halign-left valign-top">Start date</th>
<th class="tableblock halign-left valign-top">End date</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1029</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RECURRING</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Silver monthly</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-04-11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-05-11</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1029</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REPAIR_ADJ</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$-20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-04-11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-05-11</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1029</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CBA_ADJ</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-04-26</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-04-26</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>and a new invoice would be generated reflecting the reality:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 16%;">
<col style="width: 16%;">
<col style="width: 16%;">
<col style="width: 16%;">
<col style="width: 16%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Invoice #</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Amount</th>
<th class="tableblock halign-left valign-top">Start date</th>
<th class="tableblock halign-left valign-top">End date</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1030</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RECURRING</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Silver monthly</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-04-11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-04-26</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1030</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RECURRING</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gold monthly</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$30</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-04-26</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-05-11</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1030</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CBA_ADJ</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$-20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-04-26</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-04-26</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The last negative CBA_ADJ is the account credit applied from the payment of the first invoice. The balance of the new invoice is only $20.</p>
</div>
</div>
<div class="sect4">
<h5 id="_invoice_item_adjustment">Invoice item adjustment</h5>
<div class="paragraph">
<p>An invoice item adjustment would look like (assuming the invoice wasn&#8217;t paid, otherwise a CBA_ADJ item would be added):</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 16%;">
<col style="width: 16%;">
<col style="width: 16%;">
<col style="width: 16%;">
<col style="width: 16%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Invoice #</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Amount</th>
<th class="tableblock halign-left valign-top">Start date</th>
<th class="tableblock halign-left valign-top">End date</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1029</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RECURRING</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Silver monthly</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-04-11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-05-11</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1029</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ITEM_ADJ</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$-20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-04-20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-04-20</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_invoice_adjustment">Invoice adjustment</h5>
<div class="paragraph">
<p>An invoice adjustment would look similar (assuming again the invoice wasn&#8217;t paid, otherwise a CBA_ADJ item would be added):</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 16%;">
<col style="width: 16%;">
<col style="width: 16%;">
<col style="width: 16%;">
<col style="width: 16%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Invoice #</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Amount</th>
<th class="tableblock halign-left valign-top">Start date</th>
<th class="tableblock halign-left valign-top">End date</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1029</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RECURRING</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Silver monthly</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-04-11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-05-11</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1029</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CREDIT_ADJ</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$-20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-04-20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-04-20</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>A REFUND_ADJ item would be used instead of CREDIT_ADJ if the invoice was paid and a refund had been issued.</p>
</div>
</div>
<div class="sect4">
<h5 id="_credit">Credit</h5>
<div class="paragraph">
<p>Note that CREDIT_ADJ items are also used to represent credits created by the user (via APIs). In this case, a dummy invoice is created with a negative amount for the CREDIT_ADJ item. This makes the system generate a CBA_ADJ automatically, which in turn can be used as account credits. For example, here is how a $20 credit would be represented:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16%;">
<col style="width: 16%;">
<col style="width: 16%;">
<col style="width: 16%;">
<col style="width: 16%;">
<col style="width: 16%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Invoice #</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Amount</th>
<th class="tableblock halign-left valign-top">Start date</th>
<th class="tableblock halign-left valign-top">End date</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1029</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CREDIT_ADJ</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$-20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-04-20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-04-20</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="components-invoice-payments">Invoice payments</h4>
<div class="paragraph">
<p>The invoice payment table is the bridge between the invoice and payment subsystems, and is used to compute invoice balances. It will contain the payments, refunds and chargebacks made against an invoice.</p>
</div>
<div class="paragraph">
<p>If an invoice doesn&#8217;t have any corresponding row in invoice payment, this means the invoice isn&#8217;t paid (either because no payment was ever attempted, or the payment attempts weren&#8217;t successful).</p>
</div>
<div class="paragraph">
<p>A successful payment against an invoice would have a single row (of type ATTEMPT):</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Invoice #</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Payment date</th>
<th class="tableblock halign-left valign-top">Amount</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1029</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ATTEMPT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-04-12 22:45:39</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$20</p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="_refund">Refund</h5>
<div class="paragraph">
<p>Here is how a payment, followed by a refund would look like:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Invoice #</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Payment date</th>
<th class="tableblock halign-left valign-top">Amount</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1029</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ATTEMPT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-04-12 22:45:39</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$20</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1029</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REFUND</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-04-18 10:23:11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$-20</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_chargeback">Chargeback</h5>
<div class="paragraph">
<p>Here is how a payment, followed by a chargeback would look like:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Invoice #</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Payment date</th>
<th class="tableblock halign-left valign-top">Amount</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1029</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ATTEMPT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-04-12 22:45:39</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$20</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1029</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CHARGED_BACK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2013-04-18 10:23:11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">$-20</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="components-payment">Payment</h3>
<div class="paragraph">
<p>This section describes how payments work in the case of recurring billing only. For an overview of the payment subsystem in Kill Bill, check <a href="http://docs.kill-bill.org/payments.html">this guide</a>.</p>
</div>
<div class="sect3">
<h4 id="components-payment-states">Payment states</h4>
<div class="paragraph">
<p>A payment is represented in Kill Bill with a payment row in the <strong>payments</strong> table; each time a payment is made the code will create a record in the <strong>payment_attempts</strong> table and update the <strong>payment</strong> record. Both the payment and the payment_attempt have a status. The payment status is the payment_attempt status of the last attempt except when the last payment_attempt is in an UNKNOWN state, in which case the payment status is the status of the last payment_attempt status not in UNKNOWN state; if there is only one attempt and it is in an UNKNOWN state, the payment status also shows an UNKNOWN state. The various state are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>SUCCESS</strong>: The payment attempt succeeded. This is a terminal state.</p>
</li>
<li>
<p><strong>UNKNOWN</strong>: The payment attempt did not complete; for instance the system crashed while we were making the call; we are left in an unknown state. There is no automatic retry for that case, but if we issue another attempt manually, the system may heal itself.</p>
</li>
<li>
<p><strong>AUTO_PAY_OFF</strong>: The account associated with the payment is in AUTO_PAY_OFF and so any payment attempt made on that account will result in AUTO_PAY_OFF state.</p>
</li>
<li>
<p><strong>PAYMENT_FAILURE</strong>: The payment completed but failed because the payment method used to issue that payment is not valid.</p>
</li>
<li>
<p><strong>PAYMENT_FAILURE_ABORTED</strong>: The payment completed but failed because the payment method used to issue that payment is not valid. This case is similar to the previous one except it is a terminal state which occurs after we issued all the retries for that payment.</p>
</li>
<li>
<p><strong>PLUGIN_FAILURE</strong>: There was some exception coming back from the payment plugin. This state is similar to UNKNOWN in the sense we are left in an unknown state.</p>
</li>
<li>
<p><strong>PLUGIN_FAILURE_ABORTED</strong>: This state is similar to the previous one except this is terminal state, and there will be no more retries.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="components-payment-retries">Payment retries</h4>
<div class="paragraph">
<p>The Kill Bill payment code is responsible for retrying the failed payments in the following states:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>PAYMENT_FAILURE</strong>: There is a configuration parameter which specifies how many retries should happen for that state and what is the delay between each retry. The property <strong>killbill.payment.retry.days</strong> specifies a comma separated list of days specifying the delay between each retry. Note that if there is a configuration file specifying overdue states, one should arrange to align those payment retries with the overdue states. If after all the retries were made and the payment is still not successful both the last attempt and payment status transition to PAYMENT_FAILURE_ABORTED.</p>
</li>
<li>
<p><strong>PLUGIN_FAILURE</strong>: There are 3 configuration parameters which specify the retry strategy for that state. The property <strong>killbill.payment.failure.retry.start.sec</strong> specifies the number of seconds that should elapse before we do the first retry. The property <strong>killbill.payment.failure.retry.multiplier</strong> specifies the multiplier that should be applied in between each attempt to implement some exponential retry strategy. Finally the property <strong>killbill.payment.failure.retry.max.attempts</strong> specifies how many attempts should be retried in that state. If the payment keep stays in that state after we reached the maximum number of attempts, both the last attempt and payment status transition to PLUGIN_FAILURE_ABORTED.</p>
</li>
<li>
<p><strong>AUTO_PAY_OFF</strong>: All the attempts that were in AUTO_PAY_OFF will be retried when we remove the AUTO_PAY_OFF on the account.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="components-overdue">Overdue</h3>
<div class="sect3">
<h4 id="components-overdue-overview">Overview</h4>
<div class="paragraph">
<p>The overdue system takes care of dunning.</p>
</div>
<div class="paragraph">
<p>In practice, the overdue behavior is defined in an XML file (see an example <a href="https://raw.githubusercontent.com/killbill/killbill/master/server/src/test/resources/overdue.xml">here</a>). Please refer to the Overdue Configuration documentation to make Kill Bill use your own overdue configuration file.</p>
</div>
<div class="paragraph">
<p>If you need an xsd file, you can generate one using the overdue xsd-tool (replace 0.10.0 with your Kill Bill version):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">curl -O 'http://search.maven.org/remotecontent?filepath=org/kill-bill/billing/killbill-overdue/0.10.0/killbill-overdue-0.10.0-xsd-tool.jar'
java -jar killbill-overdue-0.10.0-xsd-tool.jar schema.xsd</code></pre>
</div>
</div>
<div class="paragraph">
<p>xsd files are also published on this site, at <a href="http://docs.kill-bill.org/xsd/killbill-0.10.0-overdue.xsd" class="bare">http://docs.kill-bill.org/xsd/killbill-0.10.0-overdue.xsd</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="components-analytics">Analytics</h3>
<div class="sect3">
<h4 id="components-analytics-overview">Overview</h4>
<div class="paragraph">
<p>Kill Bill maintains a reporting schema that is kept current in realtime for Analytics purposes. In contrary to other tables in the system, this set of tables is stable and potentially changes only between major revisions of Kill Bill. These tables are meant to be used as building blocks for reports and dashboards.</p>
</div>
<div class="paragraph">
<p>This analytics feature is provided as a Kill Bill <a href="https://github.com/killbill/killbill-analytics-plugin">plugin</a>. To install it, simply install the killbill-osgi-bundles-analytics jar to <strong>/var/tmp/bundles/platform/</strong> (or to your custom OSGI bundles directory if you have overridden the default path) and run the following DDL <a href="https://raw.githubusercontent.com/killbill/killbill-analytics-plugin/master/src/main/resources/org/killbill/billing/plugin/analytics/ddl.sql">script</a>.</p>
</div>
<div class="paragraph">
<p>For ease of tracking, Analytics objects contain id references to the Kill Bill ones but we strongly advise against using them for reporting purposes. Instead, use the external keys as much as possible, as they are tied to your business concepts. For instance, to count the number of accounts in the system, run a query using <strong>count(distinct account_key)</strong>, not <strong>count(distinct account_id)</strong>.</p>
</div>
<div class="paragraph">
<p>Data has been denormalized on purpose to avoid joins as much as possible.</p>
</div>
<div class="paragraph">
<p>All of this information is also available in Kaui (in the analytics section), on a per account basis.</p>
</div>
<div class="sect4">
<h5 id="_internals">Internals</h5>
<div class="paragraph">
<p>This plugin listens to events generated by Kill Bill, and rebuild the complete state of its mirrored data upon receipt. The refresh jobs (one created per event) are kept in a notification queue. By default, it uses the same notification queue tables as the system, but we encourage you to use separate ones. To do so, set the following properties (the tables have been created by the provided ddl script):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">org.killbill.notificationq.analytics.tableName=analytics_notifications
org.killbill.notificationq.analytics.historyTableName=analytics_notifications_history</code></pre>
</div>
</div>
<div class="paragraph">
<p>These jobs are kept in the <strong>refresh-queue</strong> queue of the <strong>AnalyticsService</strong> service. For debugging purposes, search key 1 is the account record id and search key 2 is the tenant record id.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="components-analytics-currency">Currency conversion</h4>
<div class="paragraph">
<p>Each table containing monetary columns (e.g. price, mrr, &#8230;&#8203;) will also contain a currency column, expressing the currency of the monetary values. This can be difficult to work with as tables can contain rows in various currencies: any arithmetic across them won&#8217;t make any sense.</p>
</div>
<div class="paragraph">
<p>To work around this problem, the Analytics plugin has the concept of converted currency, which is a global constant currency of reference. Each monetary column will have a column associated to it with the converted value in this currency.</p>
</div>
<div class="paragraph">
<p>By default, converted values are all <strong>NULL</strong>. To enable this feature, you need to populate the <strong>analytics_currency_conversion</strong> table to contain the rates you&#8217;d like to use for various currencies, for a given period of time. For example, you may choose to populate the new rates at the beginning of each month.</p>
</div>
<div class="paragraph">
<p>By default, the reference currency is USD, but you can change it via:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">com.ning.billing.osgi.bundles.analytics.referenceCurrency=EUR</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="components-analytics-accounts">Accounts</h4>
<div class="paragraph">
<p>The table <strong>analytics_accounts</strong> maintains information about Kill Bill accounts. The table doesn&#8217;t contain historic records (it will contain at most one record per Kill Bill account).</p>
</div>
</div>
<div class="sect3">
<h4 id="components-analytics-bundles">Bundles</h4>
<div class="paragraph">
<p>The table <strong>analytics_bundles</strong> maintains information about Kill Bill bundles. The table doesn&#8217;t contain historic records (it will contain at most one record per Kill Bill bundle).</p>
</div>
</div>
<div class="sect3">
<h4 id="components-analytics-subscriptions">Subscriptions</h4>
<div class="paragraph">
<p>The table <strong>analytics_subscriptions</strong> maintains information about Kill Bill subscriptions. It describes the history of changes (both past and future) on a per subscription basis.</p>
</div>
<div class="paragraph">
<p><strong>analytics_subscriptions</strong> will contain all phase transitions for all subscriptions and can be used to build subscription timelines. A few remarks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Given a subscription id, events are sorted chronologically when stored (you can rely on record_id asc)</p>
</li>
<li>
<p><strong>prev_</strong> fields will always be NULL for creation events</p>
</li>
<li>
<p><strong>next_</strong> fields will always be NULL for cancellation events</p>
</li>
<li>
<p>A CHANGE event corresponds to a user initiated change (e.g. upgrade) whereas SYSTEM_CHANGE corresponds to a phase event (e.g. transition from trial to evergreen phase)</p>
</li>
<li>
<p>The <strong>requested_timestamp</strong> field reflects when the transition was requested, the <strong>next_start_date</strong> field reflects the effective transition time</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="components-analytics-invoices">Invoices</h4>
<div class="paragraph">
<p>The tables <strong>analytics_invoices</strong>, <strong>analytics_invoice_adjustments</strong>, <strong>analytics_invoice_item_adjustments</strong>, <strong>analytics_invoice_credits</strong> and <strong>analytics_invoice_items</strong> maintain information about invoices posted by account.</p>
</div>
<div class="paragraph">
<p>Definitions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>invoice_balance</strong>: invoice_amount_charged + invoice_amount_credited + invoice_amount_adjusted_for_account_credit - (invoice_amount_paid + invoice_amount_refunded)</p>
</li>
<li>
<p><strong>invoice_amount_charged</strong>: sum of all <strong>analytics_invoice_items</strong>, <strong>analytics_invoice_adjustments</strong> and <strong>analytics_invoice_item_adjustments</strong> items for that invoice</p>
</li>
<li>
<p><strong>invoice_amount_credited</strong>: sum of all <strong>analytics_invoice_credits</strong> items for that invoice (positive if granted, negative if used)</p>
</li>
<li>
<p><strong>invoice_amount_paid</strong>: sum of all <strong>analytics_payments</strong> items for that invoice</p>
</li>
<li>
<p><strong>invoice_amount_refunded</strong>: sum of all <strong>analytics_chargebacks</strong> and <strong>analytics_refunds</strong> items for that invoice</p>
</li>
<li>
<p><strong>invoice_original_amount_charged</strong>: sum of all <strong>analytics_invoice_items</strong> items for that invoice at the time of invoice creation</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that <strong>invoice_amount_adjusted_for_account_credit</strong> is an internal adjustment that applies for account level credits only (CREDIT_ADJ items on their own invoices) and is not represented in Analytics. The full details of the computations can be found in <a href="https://github.com/killbill/killbill/blob/master/invoice/src/main/java/com/ning/billing/invoice/calculator/InvoiceCalculatorUtils.java">InvoiceCalculatorUtils.java</a>.</p>
</div>
<div class="paragraph">
<p>A few remarks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>EXTERNAL_CHARGE, FIXED and RECURRING items are treated as regular line items (stored in <strong>analytics_invoice_items</strong>)</p>
</li>
<li>
<p>ITEM_ADJ items are treated as invoice item adjustments (stored in <strong>analytics_invoice_item_adjustments</strong>)</p>
</li>
<li>
<p>CBA_ADJ items (gained or consumed) are treated as account credits (stored in <strong>analytics_invoice_credits</strong>)</p>
</li>
<li>
<p>REFUND_ADJ items are treated as invoice adjustments (stored in <strong>analytics_invoice_adjustments</strong>)</p>
</li>
<li>
<p>CREDIT_ADJ items that are not on their own invoice are treated as invoice adjustments (stored in <strong>analytics_invoice_adjustments</strong>). The internal name of CREDIT_ADJ is misleading in this case and will probably be renamed to INVOICE_ADJ in a future release. Note that these should not be mixed with account level credits: when an administrator creates an account credit (different from CBA credits generated by the system), a negative CREDIT_ADJ item is added to a new invoice. This triggers a positive CBA_ADJ item (to bring the balance back to zero), which effectively becomes the account credit (and eventually stored in <strong>analytics_invoice_credits</strong>). In this case, the CREDIT_ADJ item will not be stored directly in the analytics tables</p>
</li>
<li>
<p>Kill Bill repair items (REPAIR_ADJ) are not stored directly in any of these tables, but are combined with the new reparee item as invoice item adjustments (in <strong>analytics_invoice_item_adjustments</strong>). For example, if a recurring item of $20 was repaired into a $5 recurring item, <strong>analytics_invoice_items</strong> would contain the original $20 line item and <strong>analytics_invoice_item_adjustments</strong> would contain a $-15 adjustment item</p>
</li>
<li>
<p>Any invoice item has a revenue recognizable attribute which is used to tell if the item is recognizable from a finance perspective (tied to cash). This is used for credits only today and we assume that any administrator generated credit (CREDIT_ADJ and CBA_ADJ on their own invoice) is not recognizable. All other credit items, including system generated ones, are.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="components-analytics-payments">Payments</h4>
<div class="paragraph">
<p>The table <strong>analytics_payments</strong>, <strong>analytics_refunds</strong> and <strong>analytics_chargebacks</strong> maintain information about Kill Bill payments, refunds and chargebacks.</p>
</div>
</div>
<div class="sect3">
<h4 id="components-analytics-entitlement">Entitlement states</h4>
<div class="paragraph">
<p>The table <strong>analytics_entitlement_states</strong> maintains information about Kill Bill entitlement states, including overdue statuses. The table contains historic status for a given account.</p>
</div>
</div>
<div class="sect3">
<h4 id="components-analytics-tags-fields">Tags and custom fields</h4>
<div class="paragraph">
<p>Information about tags and custom fields are captured in the tables <strong>analytics_account_tags</strong>, <strong>analytics_bundle_tags</strong>, <strong>analytics_invoice_tags</strong>, <strong>analytics_payment_tags</strong>, <strong>analytics_account_fields</strong>, <strong>analytics_bundle_fields</strong>, <strong>analytics_invoice_fields</strong> and <strong>analytics_payment_fields</strong>. The tables don&#8217;t contain historic records (they will contain the current state of tags and custom fields).</p>
</div>
</div>
<div class="sect3">
<h4 id="components-analytics-dashboards">Dashboards and reports</h4>
<div class="paragraph">
<p>The Analytics plugin provides two types of APIs: one to retrieve and manipulate the data and one to create dashboards.</p>
</div>
<div class="sect4">
<h5 id="_data_api">Data API</h5>
<div class="paragraph">
<p>To retrieve all data for a given account:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">curl -u admin:password \
     -H "X-Killbill-ApiKey:bob" \
     -H "X-Killbill-ApiSecret:lazar" \
     http://127.0.0.1:8080/plugins/killbill-analytics/f6da101f-b43c-4bb7-920d-188eaa5ae5f8</code></pre>
</div>
</div>
<div class="paragraph">
<p>To force a refresh:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">curl -v \
     -X PUT \
     -u admin:password \
     -H "X-Killbill-ApiKey:bob" \
     -H "X-Killbill-ApiSecret:lazar" \
     http://127.0.0.1:8080/plugins/killbill-analytics/f6da101f-b43c-4bb7-920d-188eaa5ae5f8</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_dashboards">Dashboards</h5>
<div class="paragraph">
<p>The Analytics plugin provides simple, yet powerful, dashboarding capabilities.</p>
</div>
<div class="paragraph">
<p>A dashboard is constituted of a number of reports, each of them being numbered, starting from 1. All reports are displayed in a single column, the report number 1 being the top most one. All reports share the same X axis.</p>
</div>
<div class="paragraph">
<p>Currently, we support displaying data as pie charts or time series. For the former, a <strong>label</strong> and <strong>count</strong> columns are required to describe sectors. For the latter, the only required column is <strong>day</strong> (reference time, used for the X axis), you can specify any number of dimensions and metrics. If multiple dimensions are specified, one line graph will be displayed for each dimension value. For example, if your dimensions are <strong>currency</strong> and <strong>country</strong>, one line per combination (and metric) will be drawn: one for USD/USA, USD/Mexico, MEX/USA, MEX/Mexico, etc. If multiple metrics are specified, each one of them (times the cardinality of dimensions) will be on its own line graph.</p>
</div>
<div class="sect5">
<h6 id="_reports_configuration">Reports configuration</h6>
<div class="paragraph">
<p>Let&#8217;s say you want to look at the number of accounts created per day, the query may look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">select
  date_format(created_date, '%Y-%m-%d') as day
, count(*) as count
from analytics_accounts
where report_group = 'default'
group by 1
order by 1 asc
;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The first step is to create a view for the query:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">create or replace view v_new_accounts_per_day as
select
  date_format(created_date, '%Y-%m-%d') as day
, count(*) as count
from analytics_accounts
where report_group = 'default'
group by 1
order by 1 asc
;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can now create the report:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">curl -v \
     -X POST \
     -u admin:password \
     -H "X-Killbill-ApiKey:bob" \
     -H "X-Killbill-ApiSecret:lazar" \
     -H 'Content-Type: application/json' \
     -d '{"reportName": "new_accounts_per_day",
          "reportPrettyName": "New accounts created (per day)",
          "sourceTableName": "v_new_accounts_per_day"}' \
     http://127.0.0.1:8080/plugins/killbill-analytics/reports</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>reportName</strong> is a unique identifier for your report</p>
</li>
<li>
<p><strong>reportPrettyName</strong> is a description, which will be used on the dashboards</p>
</li>
<li>
<p><strong>sourceTableName</strong> is the name of the source table (view in our case)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the query is expensive, you should think of materializing it on a regular basis. Assuming you have a stored procedure <strong>refresh_new_accounts_per_day</strong> which materializes <strong>v_new_accounts_per_day</strong> into <strong>new_accounts_per_day</strong>, you can tell the Analytics plugin to run it on a daily basis at 4am GMT:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">curl -v \
     -X POST \
     -u admin:password \
     -H "X-Killbill-ApiKey:bob" \
     -H "X-Killbill-ApiSecret:lazar" \
     -H 'Content-Type: application/json' \
     -d '{"reportName": "new_accounts_per_day",
          "reportPrettyName": "New accounts created (per day)",
          "sourceTableName": "new_accounts_per_day",
          "refreshProcedureName": "refresh_new_accounts_per_day",
          "refreshFrequency": "DAILY",
          "refreshHourOfDayGmt": 4}' \
     http://127.0.0.1:8080/plugins/killbill-analytics/reports</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or alternatively, you can run it on an hourly basis (it will run at 5' past the hour):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">curl -v \
     -X POST \
     -u admin:password \
     -H "X-Killbill-ApiKey:bob" \
     -H "X-Killbill-ApiSecret:lazar" \
     -H 'Content-Type: application/json' \
     -d '{"reportName": "new_accounts_per_day",
          "reportPrettyName": "New accounts created (per day)",
          "sourceTableName": "new_accounts_per_day",
          "refreshProcedureName": "refresh_new_accounts_per_day",
          "refreshFrequency": "HOURLY"}' \
     http://127.0.0.1:8080/plugins/killbill-analytics/reports</code></pre>
</div>
</div>
<div class="paragraph">
<p>To retrieve your report configuration, use the report name:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">curl -u admin:password \
     -H "X-Killbill-ApiKey:bob" \
     -H "X-Killbill-ApiSecret:lazar" \
     http://127.0.0.1:8080/plugins/killbill-analytics/reports/new_accounts_per_day</code></pre>
</div>
</div>
<div class="paragraph">
<p>To update it (you can edit all fields but the reportName one):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">curl -v \
     -X PUT \
     -u admin:password \
     -H "X-Killbill-ApiKey:bob" \
     -H "X-Killbill-ApiSecret:lazar" \
     -H 'Content-Type: application/json' \
     -d '{"reportPrettyName": "New accounts created (refreshed at 2am GMT)",
          "refreshFrequency": "DAILY",
          "refreshHourOfDayGmt": 2}' \
     http://127.0.0.1:8080/plugins/killbill-analytics/reports/new_accounts_per_day</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, to delete it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">curl -v \
     -X DELETE \
     -u admin:password \
     -H "X-Killbill-ApiKey:bob" \
     -H "X-Killbill-ApiSecret:lazar" \
     http://127.0.0.1:8080/plugins/killbill-analytics/reports/new_accounts_per_day</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can download the data behind your report as csv or json:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">curl -u admin:password \
     -H "X-Killbill-ApiKey:bob" \
     -H "X-Killbill-ApiSecret:lazar" \
     'http://127.0.0.1:8080/plugins/killbill-analytics/reports?name=new_accounts_per_day&amp;format=csv'</code></pre>
</div>
</div>
<div class="paragraph">
<p>We provide a set of canned reports that can be useful as a starting point. See <a href="https://github.com/killbill/killbill-analytics-plugin/tree/master/src/main/resources/">https://github.com/killbill/killbill-analytics-plugin/tree/master/src/main/resources/</a>.</p>
</div>
</div>
<div class="sect5">
<h6 id="_dashboard_api">Dashboard API</h6>
<div class="paragraph">
<p>To create a dashboard, go to <a href="http://127.0.0.1:8080/plugins/killbill-analytics/static/analytics.html">http://127.0.0.1:8080/plugins/killbill-analytics/static/analytics.html</a>.</p>
</div>
<div class="paragraph">
<p>The dashboard system is controlled by query parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>report1</strong>, <strong>report2</strong>, etc.: report name (from the configuration). The number determines in which slot the data should be displayed, starting from the top of the page. For example, report1=trials&amp;report1=conversions&amp;report1=cancellations&amp;report2=accounts will graph the trials, conversions and cancellations reports in the first slot (on the same graph), and the accounts report below (in slot 2)</p>
</li>
<li>
<p><strong>startDate</strong> and <strong>endDate</strong>: dates to filter the data on the server side. For example: startDate=2012-08-01&amp;endDate=2013-10-01</p>
</li>
<li>
<p><strong>smooth1</strong>, <strong>smooth2</strong>, etc.: smoothing function to apply for data in a given slot. Currently support smoothing functions are:</p>
<div class="ulist">
<ul>
<li>
<p>AVERAGE_WEEKLY: average the values on a weekly basis</p>
</li>
<li>
<p>AVERAGE_MONTHLY: average the values on a monthly basis</p>
</li>
<li>
<p>SUM_WEEKLY: sum all values on a weekly basis</p>
</li>
<li>
<p>SUM_MONTHLY: sum all values on a monthly basis</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>title1</strong>, <strong>title2</strong>, etc.: titles for each graph. If not specified, the default title (configured in the database) is used</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can narrow down the dimensions and metrics you want to plot for each report, and even specify filters. This is useful if the underlying view is a cube, for example, and you want to extract part of the data.</p>
</div>
<div class="paragraph">
<p>The URL format for each report looks like: report1=payments_per_day^dimension:currency^dimension:state^metric:amount^metric:fee or if you want to override the legend: report1=payments_per_day(Payments per day)^dimension:currency^dimension:state^metric:amount^metric:fee</p>
</div>
<div class="paragraph">
<p>You can specify as many dimensions and metrics as you want (each one of them should correspond to a column name in your table or view, and metrics are expected to be representable by floats).</p>
</div>
<div class="paragraph">
<p>Aggregate functions are supported for metrics: report1=payments_per_day^dimension:currency^dimension:state^metric:sum(amount)^metric:count(distinct fee)^metric:100*sum(fee)/amount</p>
</div>
<div class="paragraph">
<p>You can also use the <strong>filter</strong> keywork to narrow down your dataset, for example: report1=payments_per_day^dimension:currency^dimension:state^metric:amount^metric:fee^filter:(currency=USD%26state!=ERRORED)|(currency=EUR%26state=PROCESSED)</p>
</div>
<div class="paragraph">
<p>Note that <strong>&amp;</strong> is represented as <strong>%26</strong>, to avoid making the server interpret it as a standalone query parameter.</p>
</div>
<div class="paragraph">
<p>You can have as many filters as you want, they will be ORed as a single filter in the query.</p>
</div>
<div class="paragraph">
<p>Finally, you can group certain rows together using the following syntax on dimensions (in this example, 3 groups and an <strong>Other</strong> will be created): report1=payments_per_day^dimension:currency(USD|EUR|BRL,GBP,MXN,AUD)^dimension:state^metric:amount^metric:fee</p>
</div>
<div class="paragraph">
<p>You can also setup aliases and/or skip <strong>Other</strong> as such: report1=payments_per_day\^dimension:currency(USD=Main currency|EUR=Second currency|BRL,GBP,MXN,AUD=Third currency|-)<sup>dimension:state\</sup>metric:amount^metric:fee</p>
</div>
<div class="paragraph">
<p>For debugging purposes, you can check the SQL generated by appending the <strong>sqlOnly</strong> parameter to the following endpoint:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">curl -u admin:password \
     -H "X-Killbill-ApiKey:bob" \
     -H "X-Killbill-ApiSecret:lazar" \
     'http://127.0.0.1:8080/plugins/killbill-analytics/reports?name=payments_per_day^dimension:currency^dimension:state^metric:amount^metric:fee^filter:(currency=USD%26state!=ERRORED)|(currency=EUR%26state=PROCESSED)&amp;sqlOnly=true'</code></pre>
</div>
</div>
<div class="paragraph">
<p>To continue with our example above, you can see the report by going to <a href="http://127.0.0.1:8080/plugins/killbill-analytics/static/analytics.html?report1=new_accounts_per_day">http://127.0.0.1:8080/plugins/killbill-analytics/static/analytics.html?report1=new_accounts_per_day</a>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="components-tenant">Tenant</h3>
<div class="sect3">
<h4 id="components-tenant-overview">Overview</h4>
<div class="paragraph">
<p>Kill Bill supports multi-tenancy, meaning you can run multiple logical instances of Kill Bill with a single server and database. For example, say you own two online stores, each of them having different catalogs, users, etc. You could configure a tenant for each of them, which would make the data from one store invisible to the other.</p>
</div>
<div class="paragraph">
<p>In practice, a tenant is a simple attribute that Kill Bill tracks along each object in the database (accounts, subscriptions, invoices, etc.). When multi-tenancy is enabled, you would create an <strong>api key</strong> and <strong>api password</strong> for each tenant and specify them in via the headers <strong>X-Killbill-ApiKey</strong> and <strong>X-Killbill-ApiSecret</strong> respectfully in all REST calls. Kill Bill would then automatically look up the tenant associated with your api key as part of each request.</p>
</div>
<div class="paragraph">
<p>Note that the <strong>api key</strong> is unique across tenants, similar to the tenant id. Whereas your tenant id will never change, the <strong>api key</strong> can be updated (if it is compromised for example).</p>
</div>
<div class="paragraph">
<p>Multi-tenancy is an advanced feature. You can turn it off by setting <strong>-Dkillbill.server.multitenant=false</strong>. We suggest though that it you let it enabled and create a tenant even if you have a single use case for Kill Bill. That way, you will be able to add another tenant if need be later on (going from multi-tenancy disabled to multi-tenancy enabled is much harder and will involve manual and error prone data changes).</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deployment">Deployment</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When deploying Kill Bill to a production environment, you&#8217;ll likely want to use your own container and deploy Kill Bill as a war. Below are instructions for various containers. If you&#8217;re unsure which one to use and/or don&#8217;t have any preference, we recommend Jetty.</p>
</div>
<div class="sect2">
<h3 id="_common_steps">Common steps</h3>
<div class="sect3">
<h4 id="_download_the_latest_version_of_kill_bill_server">Download the latest version of Kill Bill server</h4>
<div class="paragraph">
<p>Releases are available in Maven Central. Among other packaging formats, we provide a war with all dependencies. You can get the latest version <a href="http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22org.kill-bill.billing%22%20AND%20a%3A%22killbill-profiles-killbill%22%20AND%20p%3A%22war%22">here</a> (download the <strong>war</strong> artifact).</p>
</div>
</div>
<div class="sect3">
<h4 id="_setup_the_database">Setup the database</h4>
<div class="paragraph">
<p>Note: currently, only MySQL is supported for multi-nodes deployments.</p>
</div>
<div class="paragraph">
<p>Create the database killbill will use and apply the latest DDL schema, which can be found <a href="http://docs.kill-bill.org/schema.html">here</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="deployment-plugins">Install plugins</h4>
<div class="paragraph">
<p>One of the most powerful features of Kill Bill is its extensibility via plugins.</p>
</div>
<div class="paragraph">
<p>Here are a few examples of official plugins maintained by the Kill Bill core team:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/killbill/killbill-stripe-plugin">Stripe plugin</a>, to use <a href="https://stripe.com">Stripe</a> as a payment gateway</p>
</li>
<li>
<p><a href="https://github.com/killbill/killbill-coinbase-plugin">Coinbase plugin</a>, to use <a href="https://coinbase.com">Coinbase</a> as a payment gateway</p>
</li>
<li>
<p><a href="https://github.com/killbill/killbill-recurly-plugin">Recurly plugin</a>, to use <a href="https://recurly.com">Recurly</a> as a payment gateway</p>
</li>
<li>
<p><a href="https://github.com/killbill/killbill-paypal-express-plugin">PayPal plugin</a>, to use <a href="https://paypal.com">PayPal</a> as a payment gateway</p>
</li>
<li>
<p><a href="https://github.com/killbill/killbill-litle-plugin">Litle plugin</a>, to use <a href="https://www.litle.com">Litle &amp; co.</a> as a payment gateway</p>
</li>
<li>
<p><a href="https://github.com/killbill/killbill-logging-plugin">Logging plugin</a>, to forward Kill Bill events to email, IRC, Syslog, &#8230;&#8203;</p>
</li>
<li>
<p><a href="https://github.com/killbill/killbill-bitcoin-plugin">Bitcoin plugin</a>, to verify Kill Bill transactions on the block chain</p>
</li>
<li>
<p><a href="https://github.com/killbill/killbill-analytics-plugin">Analytics plugin</a>, for Business Intelligence and create dashboards</p>
</li>
<li>
<p><a href="https://github.com/killbill/killbill-zendesk-plugin">Zendesk plugin</a>, for mirroring Kill Bill accounts into <a href="https://zendesk.com">Zendesk</a></p>
</li>
<li>
<p><a href="https://github.com/killbill/killbill-meter-plugin">Meter plugin</a>, for metering (usage) billing</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can find more on our <a href="https://github.com/killbill">Github</a> project page. If you are interested in writing your own plugin, checkout our <a href="https://github.com/killbill/killbill-hello-world-java-plugin">hello world</a> example.</p>
</div>
<div class="sect4">
<h5 id="_bundles_directory_layout">Bundles directory layout</h5>
<div class="paragraph">
<p>Kill Bill looks for all plugins in a bundles directory, by default <strong>/var/tmp/bundles</strong> (you can override it via the system property org.killbill.osgi.bundle.install.dir).</p>
</div>
<div class="paragraph">
<p>The expected layout is the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>bundles/
  platform/
  plugins/
    ruby/
      ruby-plugin-a/
        ruby-plugin-a-version/
          killbill.properties
          gems/
      ruby-plugin-b/
        ruby-plugin-b-version/
          killbill.properties
          gems/
    java/
      java-plugin-a/
        java-plugin-a-version/
          plugin-a.jar
      java-plugin-b/
        java-plugin-b-version/
          plugin-b.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>The bundles/platform/ directory is used for non Kill Bill specific OSGI plugins. For example, you can drop in it the <a href="http://felix.apache.org/site/apache-felix-web-console.html">Apache Felix Web Console</a> jar, and Kill Bill will automatically start it during its initialization sequence. <a href="https://github.com/killbill/killbill-platform/tree/master/osgi-bundles/defaultbundles">Here</a> is a recommended set of convenience plugins to run.</p>
</div>
<div class="paragraph">
<p>Note that if you want to run Ruby plugins (see below), you need to place the org.kill-bill.billing:killbill-platform-osgi-bundles-jruby artifact as bundles/platform/jruby.jar.</p>
</div>
<div class="paragraph">
<p>The plugins directory contains Kill Bill specific OSGI plugins, written either in Ruby or Java. Whereas only a jar is needed for Java plugins, the layout of Ruby plugins is a bit more complex. It expects a top level killbill.properties file describing the type of plugin and special libraries to load, as well as a gems/ directory containing all the dependencies.</p>
</div>
<div class="paragraph">
<p>Fortunately, if you are using one of the official Ruby plugins, you don&#8217;t need to worry about this. You can download <a href="http://search.maven.org/#search%7Cga%7C1%7Corg.kill-bill.billing.plugin.ruby">tar.gz packages</a> with the correct layout. Simply unpack them and restart Kill Bill.</p>
</div>
<div class="paragraph">
<p>If you want to develop your own Ruby plugin, check our instructions <a href="https://github.com/killbill/killbill-plugin-framework-ruby/wiki/Build-Release">here</a> and <a href="https://github.com/killbill/killbill-plugin-framework-ruby/wiki/How-to-vendor-a-plugin-gem-for-Killbill-deployment">here</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="deployment-jetty">Installation in Jetty</h3>
<div class="sect3">
<h4 id="_download_the_jetty_container">Download the Jetty container</h4>
<div class="paragraph">
<p>If you don&#8217;t have it yet, you can download the Jetty container <a href="http://download.eclipse.org/jetty/">here</a>. If you&#8217;re unsure which version to use, we recommend <strong>8.1.7.v20120910</strong>. Make sure you can unpack and start Jetty as described <a href="http://wiki.eclipse.org/Jetty/Howto/Install_Jetty">here</a>.</p>
</div>
<div class="paragraph">
<p>Jetty ships with examples you can safely remove:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>contexts/javadoc.xml</p>
</li>
<li>
<p>contexts/test.d/override-web.xml</p>
</li>
<li>
<p>contexts/test.xml</p>
</li>
<li>
<p>webapps/spdy.war</p>
</li>
<li>
<p>webapps/test.war</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_deploy_kill_bill_in_jetty">Deploy Kill Bill in Jetty</h4>
<div class="paragraph">
<p>Place the downloaded Kill Bill war under <strong>webapps/root.war</strong> in the Jetty folder.</p>
</div>
<div class="paragraph">
<p>Update the <strong>start.ini</strong> file with Kill Bill specific configuration. Here is a working example (make sure to adapt the jdbc properties):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java" data-lang="java"># Kill Bill properties
-Dorg.killbill.dao.url=jdbc:mysql://127.0.0.1:3306/killbill
-Dorg.killbill.dao.user=killbill
-Dorg.killbill.dao.password=killbill

# Start classpath OPTIONS
OPTIONS=Server,resources,ext,plus,annotations

# Configuration files
etc/jetty.xml
etc/jetty-annotations.xml
etc/jetty-deploy.xml
etc/jetty-webapps.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>You should now be all set! Kill Bill can be started via the command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">java -jar start.jar</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_enable_ssl">Enable SSL</h4>
<div class="paragraph">
<p>The following command generates a key pair and certificate directly into a keystore:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">keytool -keystore keystore -alias jetty -genkey -keyalg RSA</code></pre>
</div>
</div>
<div class="paragraph">
<p>Save the keystore file under the <strong>etc/</strong> directory of the Jetty distribution.</p>
</div>
<div class="paragraph">
<p>In your <strong>start.ini</strong> file, add the <strong>etc/jetty-ssl.xml</strong> configuration file and edit this file to update the <strong>KeyStorePassword</strong>, <strong>KeyManagerPassword</strong> and <strong>TrustStorePassword</strong> directives with the passwords you specified when you ran the keytool command.</p>
</div>
<div class="paragraph">
<p>Kill Bill should now be available over SSL. For more details, see the Jetty guide <a href="http://wiki.eclipse.org/Jetty/Howto/Configure_SSL">here</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="deployment-tomcat">Installation in Tomcat</h3>
<div class="sect3">
<h4 id="_download_the_tomcat_container">Download the Tomcat container</h4>
<div class="paragraph">
<p>If you don&#8217;t have it yet, you can download the Tomcat container <a href="https://s3.amazonaws.com/kb-binaries/apache-tomcat-7.0.42.tar.gz">here</a>. You can then untar the archive and at this point you need to tweak the configuration before starting it. The setup suggested below is a quick setup used for demo, it may not be not best way to deploy your Kill Bill war into tomcat especially if you plan to have multiple wars within the same container.</p>
</div>
</div>
<div class="sect3">
<h4 id="_deploy_kill_bill_in_tomcat">Deploy Kill Bill in Tomcat</h4>
<div class="paragraph">
<p>Assuming you installed tomcat in a directory called <strong>CATALINA_HOME</strong>, then there are two things that need to happen:</p>
</div>
<div class="paragraph">
<p>The Kill Bill system properties need to be added at the end of the <strong>CATALINA_HOME/conf/catalina.properties</strong>. The minimal set of system properties that need to added are the one for the jdbc parameters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java" data-lang="java"># Kill Bill properties
org.killbill.dao.url=jdbc:mysql://127.0.0.1:3306/killbill
org.killbill.dao.user=killbill
org.killbill.dao.password=killbil
ANTLR_USE_DIRECT_CLASS_LOADING=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>A new entry must be added to let tomcat know about the location of the Kill Bill war. That file is called <strong>Root.xml</strong> and it must located under <strong>CATALINA_HOME/conf/Catalina/localhost</strong> (create the directories if they don&#8217;t exist). Its content must be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml" data-lang="xml">&lt;Context docBase="path_to_killbill-server.war"&gt;
&lt;/Context&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once this is setup, you can start the tomcat container using the script <strong>CATALINA_HOME/bin/startup.sh</strong>. The server will be started in the background but logs can be followed at <strong>CATALINA_HOME/logs/catalina.out</strong>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="deployment-glassfish">Installation in Glassfish</h3>
<div class="sect3">
<h4 id="_download_the_glassfish_container">Download the GlassFish container</h4>
<div class="paragraph">
<p>If you don&#8217;t have it yet, you can download the GlassFish container <a href="http://glassfish.java.net/">here</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_deploy_kill_bill_in_glassfish">Deploy Kill Bill in GlassFish</h4>
<div class="paragraph">
<p>Configure GlassFish with your Kill Bill specific configuration in <strong>domains/domain1/config/domain.xml</strong> (make sure to adapt the jdbc properties):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml" data-lang="xml">&lt;jvm-options&gt;-Dorg.killbill.dao.url=jdbc:mysql://127.0.0.1:3306/killbill&lt;/jvm-options&gt;
&lt;jvm-options&gt;-Dorg.killbill.dao.user=killbill&lt;/jvm-options&gt;
&lt;jvm-options&gt;-Dorg.killbill.dao.password=killbill&lt;/jvm-options&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the <strong>glassfish</strong> directory of the unzipped GlasshFish distribution, run the following command to deploy Kill Bill:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">./bin/asadmin start-domain ; ./bin/asadmin deploy --contextroot "/" /path/to/killbill.war</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration">Configuration</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_system_properties">System properties</h3>
<div class="sect3">
<h4 id="configuration-overview">Overview</h4>
<div class="paragraph">
<p>Kill Bill configuration is done principally via Java System Properties. These can be set on the command line (e.g. <strong>java -Dkey1=value1 -Dkey2=value2 -jar killbill-server-jetty-console.war</strong>) or in Java Properties files (via <strong>-Dorg.killbill.server.properties=file:///path/to/killbill.properties</strong> or <strong>start.ini</strong> if you are using Jetty). Some containers use custom formats (for example, System Properties in GlassFish would be placed in <strong>domains/domain1/config/domain.xml</strong>), please refer to your container documentation for more information.</p>
</div>
<div class="paragraph">
<p>Various specific subcomponents are configured using XML files, including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://ehcache.org/">EhCache</a></p>
</li>
<li>
<p>Catalog</p>
</li>
<li>
<p>Overdue</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In this case, you would use System Properties to specify the path to the XML file. For example, set <strong>-Dorg.killbill.catalog.uri=file:///Users/acme/catalog/AcmeCatalog.xml</strong> to specify that the catalog configuration is located at <strong>/Users/acme/catalog/AcmeCatalog.xml</strong>.</p>
</div>
<div class="paragraph">
<p>This page lists all the System Properties you can set in Kill Bill. For component specific configuration (e.g. catalog), see the appropriate sections in the User Manual.</p>
</div>
</div>
<div class="sect3">
<h4 id="configuration-cache">Cache config</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.cache.config.location</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/ehcache.xml</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path to Ehcache XML configuration</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="configuration-catalog">Catalog config</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.catalog.uri</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SpyCarBasic.xml</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Catalog location. Either in the classpath (e.g. <strong>jar:///com/acme/catalog/AcmeCatalog.xml</strong>) or in the filesystem (e.g. <strong><a href="file:///Users/acme/catalog/AcmeCatalog.xml" class="bare">file:///Users/acme/catalog/AcmeCatalog.xml</a></strong>)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="configuration-email">Email config</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.mail.smtp.host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">null</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MTA host used for email notifications</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.mail.smtp.port</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">null</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MTA port used for email notifications</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.mail.smtp.auth</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to authenticate against the MTA</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.mail.smtp.user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">null</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Username to use to authenticate against the MTA</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.mail.smtp.password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">null</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password to use to authenticate against the MTA</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.mail.from</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="mailto:support@example.com">support@example.com</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default From: field for email notifications</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.mail.useSSL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to use secure SMTP</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.mail.invoiceEmailSubject</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Your invoice</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default Subject: field for invoice notifications</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="configuration-invoice">Invoice config</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.invoice.maxNumberOfMonthsInFuture</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">36</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum target date to consider when generating an invoice</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.invoice.emailNotificationsEnabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to send email notifications on invoice creation (for configured accounts)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="configuration-jdbc">JDBC config</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.dao.url</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">jdbc:h2:file:killbill;MODE=MYSQL;DB_CLOSE_DELAY=-1;MVCC=true;DB_CLOSE_ON_EXIT=FALSE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The jdbc url for the database</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.dao.user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">killbill</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The jdbc user name for the database</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.dao.password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">killbill</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The jdbc password for the database</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.dao.minIdle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The minimum allowed number of idle connections to the database</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.dao.maxActive</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">30</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The maximum allowed number of active connections to the database</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.dao.connectionTimeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">How long to wait before a connection attempt to the database is considered timed out</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.dao.idleMaxAge</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60m</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The time for a connection to remain unused before it is closed off</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.dao.maxConnectionAge</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0m</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any connections older than this setting will be closed off whether it is idle or not. Connections currently in use will not be affected until they are returned to the pool</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.dao.idleConnectionTestPeriod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5m</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time for a connection to remain idle before sending a test query to the DB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.dao.logLevel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">WARN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Log level for SQL queries</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.dao.transactionHandler</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.commons.jdbi.transaction.RestartTransactionRunner</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The TransactionHandler to use for all Handle instances</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.dao.poolingType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">C3P0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Connection pooling library to use (C3P0 or BONECP)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="configuration-notification">Notification queue config</h4>
<div class="paragraph">
<p>For the following options, replace <strong>${instanceName}</strong> with either <strong>main</strong> for the main notification queue or <strong>external</strong> for the one used by the plugins.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.notificationq.${instanceName}.max.failure.retry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number retry for a given event when an exception occurs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.notificationq.${instanceName}.claimed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of notifications to fetch from the database at once</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.notificationq.${instanceName}.claim.time</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5m</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Claim time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.notificationq.${instanceName}.sleep</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time in milliseconds to sleep between runs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.notificationq.${instanceName}.notification.off</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to turn off the notification queue</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.notificationq.${instanceName}.notification.nbThreads</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of threads to use</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.notificationq.${instanceName}.useInflightQ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to use the inflight queue</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.notificationq.${instanceName}.queue.capacity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum queue capacity</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.notificationq.${instanceName}.prefetch</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of notifications to read from the database at once</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.notificationq.${instanceName}.tableName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">notifications</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Notifications table name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.notificationq.${instanceName}.historyTableName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">notifications_history</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Notifications history table name</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="configuration-osgi">OSGI config</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.osgi.bundle.property.name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">killbill.properties</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the properties file for OSGI plugins</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.osgi.root.dir</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/var/tmp/felix</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bundles cache area for the OSGI framework</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.osgi.bundle.cache.name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">osgi-cache</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bundles cache name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.osgi.bundle.install.dir</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/var/tmp/bundles</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bundles install directory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.osgi.system.bundle.export.packages</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <strong>org.killbill.billing.util.config.OSGIConfig</strong> for the full list</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Packages to export from the system bundle</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.billing.osgi.jdbc.url</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">jdbc:mysql://127.0.0.1:3306/killbill</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The jdbc url for the database</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.billing.osgi.jdbc.user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">root</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The jdbc user name for the database</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.billing.osgi.jdbc.password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">root</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The jdbc password for the database</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.billing.osgi.jdbc.minIdle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The minimum allowed number of idle connections to the database</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.billing.osgi.jdbc.maxActive</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The maximum allowed number of active connections to the database</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.billing.osgi.jdbc.connectionTimeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">How long to wait before a connection attempt to the database is considered timed out</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="configuration-overdue">Overdue config</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.overdue.uri</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NoOverdueConfig.xml</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Overdue configuration location. Either in the classpath (e.g. <strong>jar:///com/acme/overdue/AcmeOverdue.xml</strong>) or in the filesystem (e.g. <strong><a href="file:///Users/acme/overdue/AcmeOverdue.xml" class="bare">file:///Users/acme/overdue/AcmeOverdue.xml</a></strong>)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="configuration-payment">Payment config</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.payment.provider.default</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">__external_payment__</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default payment provider to use</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.payment.retry.days</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8,8,8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interval in days between payment retries</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.payment.failure.retry.start.sec</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">300</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.payment.failure.retry.multiplier</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.payment.failure.retry.max.attempts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum number of retries for failed payments</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.payment.plugin.timeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timeout for each payment attempt</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.payment.plugin.threads.nb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of threads for plugin executor dispatcher</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.payment.off</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether the payment subsystem is off</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="configuration-bus">Persistent bus config</h4>
<div class="paragraph">
<p>For the following options, replace <strong>${instanceName}</strong> with either <strong>main</strong> for the main bus or <strong>external</strong> for the one used by the plugins.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.persistent.bus.${instanceName}.max.failure.retry</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number retry for a given event when an exception occurs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.persistent.bus.${instanceName}.claimed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of bus events to fetch from the database at once</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.persistent.bus.${instanceName}.claim.time</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5m</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Claim time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.persistent.bus.${instanceName}.sleep</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time in milliseconds to sleep between runs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.persistent.bus.${instanceName}.off</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to turn off the persistent bus</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.persistent.bus.${instanceName}.nbThreads</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of threads to use</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.persistent.bus.${instanceName}.useInflightQ</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to use the inflight queue</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.persistent.bus.${instanceName}.queue.capacity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum queue capacity</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.persistent.bus.${instanceName}.queue.prefetch</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of bus events to read from the database at once</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.persistent.bus.${instanceName}.tableName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bus_events</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bus events table name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.persistent.bus.${instanceName}.historyTableName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bus_events_history</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bus events history table name</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="configuration-translation">Translation config</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.default.locale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">en_US</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default Kill Bill locale</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.catalog.bundlePath</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org/killbill/billing/util/template/translation/CatalogTranslation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path to the catalog translation bundle</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.template.bundlePath</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org/killbill/billing/util/template/translation/InvoiceTranslation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path to the invoice template translation bundle</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.template.name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org/killbill/billing/util/email/templates/HtmlInvoiceTemplate.mustache</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path to the HTML invoice template</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.manualPayTemplate.name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org/killbill/billing/util/email/templates/HtmlInvoiceTemplate.mustache</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path to the invoice template for accounts with MANUAL_PAY tag</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.template.invoiceFormatterFactoryClass</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.killbill.billing.invoice.template.formatters.DefaultInvoiceFormatterFactory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Invoice formatter class</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="configuration-rbac">RBAC config</h4>
<div class="paragraph">
<p>Kill Bill implements role-based access control (RBAC) for authentication and authorization. While the concept of users and roles are expected to be managed outside of Kill Bill, a set of permissions are defined and enforced at the library API level. The full set of permissions can be found <a href="https://raw.github.com/killbill/killbill-api/master/src/main/java/org/killbill/billing/security/Permission.java">here</a>.</p>
</div>
<div class="paragraph">
<p>Kill Bill expects a Realm to contain the mapping of users and roles, as well as roles and permissions. You can configure these in an ini file, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ini" data-lang="ini"># Passwords can be encrypted, see http://shiro.apache.org/configuration.html#Configuration-EncryptingPasswords
[users]
admin = password, root
bob = password, finance
sarah = password, support

[roles]
root = *:*
finance = invoice:*, payment:*
support = entitlement:*, invoice:item_adjust, payment:refund</code></pre>
</div>
</div>
<div class="paragraph">
<p>Specify the path to this file via <strong>-Dorg.killbill.security.shiroResourcePath=/var/tmp/security.ini</strong>.</p>
</div>
<div class="paragraph">
<p>Alternatively, you can connect your LDAP instance to Kill Bill. See <a href="https://raw.github.com/killbill/killbill/master/util/src/main/java/org/killbill/billing/util/config/SecurityConfig.java">SecurityConfig.java</a> for configuration options.</p>
</div>
<div class="paragraph">
<p>RBAC is enabled by default, with a single admin user defined (username <strong>admin</strong>, password <strong>password</strong>).</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="apis">APIs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Kill Bill offers two sets of APIs.</p>
</div>
<div class="paragraph">
<p>In case you are using Kill Bill as a library in your Java application, you can use directly the Java APIs available <a href="https://github.com/killbill/killbill-api/tree/master/src/main/java/org/killbill/billing">here</a>.</p>
</div>
<div class="paragraph">
<p>But in most cases, you will use Kill Bill as a standalone service, and you are going to communicate with it over HTTP(s), using the REST APIs.</p>
</div>
<div class="paragraph">
<p>We offer several client libraries with examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://github.com/killbill/killbill-client-java">Java library</a></p>
</li>
<li>
<p><a href="http://github.com/killbill/killbill-client-ruby">Ruby library</a></p>
</li>
<li>
<p><a href="http://github.com/killbill/killbill-client-php">PHP library</a></p>
</li>
<li>
<p><a href="http://github.com/killbill/killbill-client-js">Node.js library</a></p>
</li>
<li>
<p><a href="http://github.com/killbill/killbill-client-python">Python library</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Below is a reference for all available resources. For more details and body parameters, follow the code <a href="https://github.com/killbill/killbill/tree/master/jaxrs/src/main/java/org/killbill/billing/jaxrs/resources">here</a>.</p>
</div>
<div class="sect2">
<h3 id="_rest_api">REST API</h3>
<div class="sect3">
<h4 id="_accountresource">AccountResource</h4>
<div class="sect4">
<h5 id="_apis">APIs</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">HTTP VERB</th>
<th class="tableblock halign-left valign-top">URI</th>
<th class="tableblock halign-left valign-top">Query Parameters</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/accounts/{accountId}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">accountWithBalance, accountWithBalanceAndCBA, audit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get account</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/accounts/pagination</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">offset, limit, accountWithBalance, accountWithBalanceAndCBA, audit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get accounts</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/accounts/search/{searchKey}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">offset, limit, accountWithBalance, accountWithBalanceAndCBA, audit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Search accounts</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/accounts/{accountId}/bundles</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">externalKey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get account bundles</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/accounts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">externalKey, accountWithBalance, accountWithBalanceAndCBA, audit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get account by key</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/accounts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create account</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PUT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/accounts/{accountId}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update account</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DELETE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/accounts/{accountId}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cancel account</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/accounts/{accountId}/timeline</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">audit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get account timeline</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/accounts/{accountId}/emailNotifications</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get email notifications for account</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PUT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/accounts/{accountId}/emailNotifications</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get email notifications for account</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/accounts/{accountId}/cbaRebalancing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rebalance existing cba onaccount</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/accounts/{accountId}/invoices</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">withItems, unpaidInvoicesOnly, audit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get invoices</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/accounts/{accountId}/invoicePayments</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">audit, withPluginInfo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get invoice payments</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/accounts/{accountId}/invoicePayments</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">externalPayment, paymentAmount, pluginProperty</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pay all invoices</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/accounts/{accountId}/paymentMethods</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">isDefault, payAllUnpaidInvoices, pluginProperty</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create payment method</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/accounts/{accountId}/paymentMethods</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">withPluginInfo, pluginProperty, audit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get payment methods</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PUT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/accounts/{accountId}/paymentMethods/{paymentMethodId}/setDefault</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">payAllUnpaidInvoices, pluginProperty</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set default payment method</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/accounts/{accountId}/payments</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">audit, pluginProperty, withPluginInfo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get payments</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/accounts/{accountId}/payments</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">paymentMethodId, pluginProperty</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Process payment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/accounts/{accountId}/overdue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get overdue account</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/accounts/{accountId}/customFields</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">audit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get custom fields</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/accounts/{accountId}/customFields</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create custom fields</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DELETE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/accounts/{accountId}/customFields</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">customFieldList</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete custom fields</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/accounts/{accountId}/tags</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">audit, includedDeleted</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get tags</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/accounts/{accountId}/tags</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tagList</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create tags</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DELETE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/accounts/{accountId}/tags</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tagList</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete tags</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/accounts/{accountId}/emails</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get emails</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/accounts/{accountId}/emails</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add email</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DELETE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/accounts/{accountId}/emails/{email}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Remove email</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_json_fields_accountjson">Json fields AccountJson</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">accountId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">firstNameLength</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">externalKey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">email</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">billCycleDayLocal</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">currency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">paymentMethodId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">timeZone</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">address1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">address2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">postalCode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">company</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">city</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">state</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">country</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">locale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">phone</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">isMigrated</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">isNotifiedForInvoices</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">accountBalance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">accountCBA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">auditLogs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_json_fields_paymenttransactionjson">Json fields PaymentTransactionJson</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">transactionId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">transactionExternalKey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">paymentId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">paymentExternalKey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">transactionType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">amount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">currency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">effectiveDate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">status</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gatewayErrorCode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gatewayErrorMsg</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">firstPaymentReferenceId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">secondPaymentReferenceId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">properties</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">auditLogs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_json_fields_paymentmethodjson">Json fields PaymentMethodJson</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">paymentMethodId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">externalKey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">accountId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">isDefault</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pluginName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pluginInfo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">auditLogs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_json_fields_invoiceemailjson">Json fields InvoiceEmailJson</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">accountId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">isNotifiedForInvoices</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_json_fields_accountemailjson">Json fields AccountEmailJson</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">accountId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">email</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_bundleresource">BundleResource</h4>
<div class="sect4">
<h5 id="_apis_2">APIs</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">HTTP VERB</th>
<th class="tableblock halign-left valign-top">URI</th>
<th class="tableblock halign-left valign-top">Query Parameters</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/bundles/{bundleId}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get bundle</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/bundles</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">externalKey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get bundle by key</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/bundles/pagination</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">offset, limit, audit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get bundles</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/bundles/search/{searchKey}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">offset, limit, audit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Search bundles</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PUT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/bundles/{bundleId}/pause</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">requestedDate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pause bundle</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PUT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/bundles/{bundleId}/resume</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">requestedDate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Resume bundle</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/bundles/{bundleId}/customFields</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">audit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get custom fields</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/bundles/{bundleId}/customFields</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create custom fields</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DELETE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/bundles/{bundleId}/customFields</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">customFieldList</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete custom fields</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/bundles/{bundleId}/tags</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">audit, includedDeleted</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get tags</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PUT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/bundles/{bundleId}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">requestedDate, billingPolicy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transfer bundle</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/bundles/{bundleId}/tags</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tagList</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create tags</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DELETE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/bundles/{bundleId}/tags</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tagList</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete tags</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_json_fields_bundlejson">Json fields BundleJson</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">accountId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">bundleId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">externalKey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">subscriptions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">auditLogs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_catalogresource">CatalogResource</h4>
<div class="sect4">
<h5 id="_apis_3">APIs</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">HTTP VERB</th>
<th class="tableblock halign-left valign-top">URI</th>
<th class="tableblock halign-left valign-top">Query Parameters</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/catalog</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get catalog xml</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/catalog</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get catalog json</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/catalog/availableAddons</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">baseProductName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get available addons</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/catalog/availableBasePlans</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get available base plans</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/catalog/simpleCatalog</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get simple catalog</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_creditresource">CreditResource</h4>
<div class="sect4">
<h5 id="_apis_4">APIs</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">HTTP VERB</th>
<th class="tableblock halign-left valign-top">URI</th>
<th class="tableblock halign-left valign-top">Query Parameters</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/credits/{creditId}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get credit</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/credits</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create credit</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_json_fields_creditjson">Json fields CreditJson</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">creditAmount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">invoiceId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">invoiceNumber</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">effectiveDate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">accountId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">auditLogs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_customfieldresource">CustomFieldResource</h4>
<div class="sect4">
<h5 id="_apis_5">APIs</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">HTTP VERB</th>
<th class="tableblock halign-left valign-top">URI</th>
<th class="tableblock halign-left valign-top">Query Parameters</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/customFields/pagination</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">offset, limit, audit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get custom fields</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/customFields/search/{searchKey}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">offset, limit, audit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Search custom fields</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_exportresource">ExportResource</h4>
<div class="sect4">
<h5 id="_apis_6">APIs</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">HTTP VERB</th>
<th class="tableblock halign-left valign-top">URI</th>
<th class="tableblock halign-left valign-top">Query Parameters</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/export/{accountId}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Export data for account</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_invoicepaymentresource">InvoicePaymentResource</h4>
<div class="sect4">
<h5 id="_apis_7">APIs</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">HTTP VERB</th>
<th class="tableblock halign-left valign-top">URI</th>
<th class="tableblock halign-left valign-top">Query Parameters</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/invoicePayments/{paymentId}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">withPluginInfo, pluginProperty, audit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get invoice payment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/invoicePayments/{paymentId}/refunds</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">pluginProperty</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create refund with adjustments</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/invoicePayments/{paymentId}/chargebacks</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create chargeback</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/invoicePayments/{paymentId}/customFields</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">audit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get custom fields</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/invoicePayments/{paymentId}/customFields</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create custom fields</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DELETE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/invoicePayments/{paymentId}/customFields</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">customFieldList</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete custom fields</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/invoicePayments/{paymentId}/tags</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">pluginProperty, audit, includedDeleted</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get tags</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/invoicePayments/{paymentId}/tags</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tagList</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create tags</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DELETE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/invoicePayments/{paymentId}/tags</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tagList</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete tags</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_json_fields_invoicepaymenttransactionjson">Json fields InvoicePaymentTransactionJson</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">transactionId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">transactionExternalKey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">paymentId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">paymentExternalKey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">transactionType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">amount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">currency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">effectiveDate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">status</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gatewayErrorCode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gatewayErrorMsg</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">firstPaymentReferenceId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">secondPaymentReferenceId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">properties</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">isAdjusted</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">adjustments</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">auditLogs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_invoiceresource">InvoiceResource</h4>
<div class="sect4">
<h5 id="_apis_8">APIs</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">HTTP VERB</th>
<th class="tableblock halign-left valign-top">URI</th>
<th class="tableblock halign-left valign-top">Query Parameters</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/invoices/{invoiceId}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">withItems, audit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get invoice</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/invoices/{invoiceNumber}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">withItems, audit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get invoice by number</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/invoices/{invoiceId}/html</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get invoice as html</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/invoices/pagination</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">offset, limit, withItems, audit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get invoices</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/invoices/search/{searchKey}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">offset, limit, withItems, audit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Search invoices</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/invoices</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">accountId, targetDate, dryRun</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create future invoice</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DELETE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/invoices/{invoiceId}/{invoiceItemId}/cba</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">accountId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete cba</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/invoices/{invoiceId}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">requestedDate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adjust invoice item</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/invoices/charges/{accountId}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">requestedDate, payInvoice, pluginProperty</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create external charges</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/invoices/{invoiceId}/payments</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">audit, withPluginInfo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get payments</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/invoices/{invoiceId}/payments</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">externalPayment, pluginProperty</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create instant payment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/invoices/{invoiceId}/emailNotifications</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Trigger email notification for invoice</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/invoices/{invoiceId}/customFields</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">audit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get custom fields</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/invoices/{invoiceId}/customFields</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create custom fields</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DELETE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/invoices/{invoiceId}/customFields</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">customFieldList</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete custom fields</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/invoices/{invoiceId}/tags</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">audit, includedDeleted</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get tags</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/invoices/{invoiceId}/tags</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tagList</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create tags</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DELETE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/invoices/{invoiceId}/tags</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tagList</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete tags</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_json_fields_invoicepaymentjson">Json fields InvoicePaymentJson</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">targetInvoiceId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">accountId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">paymentId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">paymentNumber</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">paymentExternalKey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">authAmount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">capturedAmount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">purchasedAmount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">refundedAmount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">creditedAmount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">currency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">paymentMethodId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">transactions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">auditLogs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_json_fields_invoiceitemjson">Json fields InvoiceItemJson</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">invoiceItemId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">invoiceId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">linkedInvoiceItemId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">accountId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">bundleId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">subscriptionId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">planName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">phaseName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">usageName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">itemType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">startDate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">endDate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">amount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">currency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">auditLogs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_paymentgatewayresource">PaymentGatewayResource</h4>
<div class="sect4">
<h5 id="_apis_9">APIs</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">HTTP VERB</th>
<th class="tableblock halign-left valign-top">URI</th>
<th class="tableblock halign-left valign-top">Query Parameters</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/paymentGateways/hosted/form/{accountId}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">pluginProperty</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Build form descriptor</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/paymentGateways/notification/{pluginName}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">pluginProperty</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Process notification</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_json_fields_hostedpaymentpagefieldsjson">Json fields HostedPaymentPageFieldsJson</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">formFields</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_paymentmethodresource">PaymentMethodResource</h4>
<div class="sect4">
<h5 id="_apis_10">APIs</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">HTTP VERB</th>
<th class="tableblock halign-left valign-top">URI</th>
<th class="tableblock halign-left valign-top">Query Parameters</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/paymentMethods/{paymentMethodId}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">pluginProperty, audit, withPluginInfo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get payment method</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/paymentMethods</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">externalKey, pluginProperty, audit, withPluginInfo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get payment method by key</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/paymentMethods/pagination</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">offset, limit, pluginName, pluginProperty, audit, withPluginInfo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get payment methods</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/paymentMethods/search/{searchKey}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">offset, limit, pluginName, pluginProperty, audit, withPluginInfo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Search payment methods</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DELETE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/paymentMethods/{paymentMethodId}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">deleteDefaultPmWithAutoPayOff, pluginProperty</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete payment method</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_paymentresource">PaymentResource</h4>
<div class="sect4">
<h5 id="_apis_11">APIs</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">HTTP VERB</th>
<th class="tableblock halign-left valign-top">URI</th>
<th class="tableblock halign-left valign-top">Query Parameters</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/payments/{paymentId}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">withPluginInfo, pluginProperty, audit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get payment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/payments/pagination</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">offset, limit, pluginName, pluginProperty, audit, withPluginInfo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get payments</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/payments/search/{searchKey}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">offset, limit, pluginName, pluginProperty, audit, withPluginInfo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Search payments</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/payments/{paymentId}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">pluginProperty</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Capture authorization</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/payments/{paymentId}/refunds</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">pluginProperty</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Refund payment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DELETE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/payments/{paymentId}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">pluginProperty</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Void payment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/payments/{paymentId}/chargebacks</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Chargeback payment</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_json_fields_paymenttransactionjson_2">Json fields PaymentTransactionJson</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">transactionId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">transactionExternalKey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">paymentId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">paymentExternalKey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">transactionType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">amount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">currency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">effectiveDate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">status</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gatewayErrorCode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gatewayErrorMsg</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">firstPaymentReferenceId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">secondPaymentReferenceId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">properties</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">auditLogs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_securityresource">SecurityResource</h4>
<div class="sect4">
<h5 id="_apis_12">APIs</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">HTTP VERB</th>
<th class="tableblock halign-left valign-top">URI</th>
<th class="tableblock halign-left valign-top">Query Parameters</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/security/permissions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get current user permissions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/security/subject</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get current user subject</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_subscriptionresource">SubscriptionResource</h4>
<div class="sect4">
<h5 id="_apis_13">APIs</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">HTTP VERB</th>
<th class="tableblock halign-left valign-top">URI</th>
<th class="tableblock halign-left valign-top">Query Parameters</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/subscriptions/{subscriptionId}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get entitlement</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/subscriptions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">requestedDate, callCompletion, callTimeoutSec</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create entitlement</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PUT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/subscriptions/{subscriptionId}/uncancel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uncancel entitlement plan</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PUT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/subscriptions/{subscriptionId}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">requestedDate, callCompletion, callTimeoutSec, billingPolicy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Change entitlement plan</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DELETE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/subscriptions/{subscriptionId}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">requestedDate, callCompletion, callTimeoutSec, entitlementPolicy, billingPolicy, useRequestedDateForBilling</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cancel entitlement plan</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/subscriptions/{subscriptionId}/customFields</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">audit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get custom fields</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/subscriptions/{subscriptionId}/customFields</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create custom fields</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DELETE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/subscriptions/{subscriptionId}/customFields</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">customFieldList</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete custom fields</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/subscriptions/{subscriptionId}/tags</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">audit, includedDeleted</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get tags</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/subscriptions/{subscriptionId}/tags</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tagList</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create tags</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DELETE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/subscriptions/{subscriptionId}/tags</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">tagList</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete tags</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_json_fields_subscriptionjson">Json fields SubscriptionJson</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">accountId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">bundleId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">subscriptionId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">externalKey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">startDate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">productName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">productCategory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">billingPeriod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">priceList</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cancelledDate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">chargedThroughDate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">billingStartDate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">billingEndDate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">events</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">newEvents</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">deletedEvents</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">auditLogs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_tagdefinitionresource">TagDefinitionResource</h4>
<div class="sect4">
<h5 id="_apis_14">APIs</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">HTTP VERB</th>
<th class="tableblock halign-left valign-top">URI</th>
<th class="tableblock halign-left valign-top">Query Parameters</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/tagDefinitions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">audit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get tag definitions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/tagDefinitions/{tagDefinitionId}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">audit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get tag definition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/tagDefinitions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create tag definition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DELETE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/tagDefinitions/{tagDefinitionId}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete tag definition</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_json_fields_tagdefinitionjson">Json fields TagDefinitionJson</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">isControlTag</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">applicableObjectTypes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">auditLogs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_tagresource">TagResource</h4>
<div class="sect4">
<h5 id="_apis_15">APIs</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">HTTP VERB</th>
<th class="tableblock halign-left valign-top">URI</th>
<th class="tableblock halign-left valign-top">Query Parameters</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/tags/pagination</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">offset, limit, audit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get tags</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/tags/search/{searchKey}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">offset, limit, audit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Search tags</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_tenantresource">TenantResource</h4>
<div class="sect4">
<h5 id="_apis_16">APIs</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">HTTP VERB</th>
<th class="tableblock halign-left valign-top">URI</th>
<th class="tableblock halign-left valign-top">Query Parameters</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/tenants/{tenantId}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get tenant</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/tenants</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">apiKey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get tenant by api key</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/tenants</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create tenant</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/tenants/registerNotificationCallback</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">cb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Register push notification callback</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/tenants/registerNotificationCallback</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get push notification callbacks</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DELETE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/tenants/registerNotificationCallback</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete push notification callbacks</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_json_fields_tenantjson">Json fields TenantJson</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tenantId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">externalKey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">apiKey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">apiSecret</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_testresource">TestResource</h4>
<div class="sect4">
<h5 id="_apis_17">APIs</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">HTTP VERB</th>
<th class="tableblock halign-left valign-top">URI</th>
<th class="tableblock halign-left valign-top">Query Parameters</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/test/clock</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">timeZone</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get current time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/test/clock</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">requestedDate, timeZone, timeoutSec</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set test clock time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PUT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/test/clock</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">days, weeks, months, years, timeZone, timeoutSec</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update test clock time</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_transactionresource">TransactionResource</h4>
<div class="sect4">
<h5 id="_apis_18">APIs</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">HTTP VERB</th>
<th class="tableblock halign-left valign-top">URI</th>
<th class="tableblock halign-left valign-top">Query Parameters</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/paymentTransactions/{transactionId}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Notify state changed</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_json_fields_paymenttransactionjson_3">Json fields PaymentTransactionJson</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">transactionId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">transactionExternalKey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">paymentId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">paymentExternalKey</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">transactionType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">amount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">currency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">effectiveDate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">status</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gatewayErrorCode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">gatewayErrorMsg</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">firstPaymentReferenceId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">secondPaymentReferenceId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">properties</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">auditLogs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_usageresource">UsageResource</h4>
<div class="sect4">
<h5 id="_apis_19">APIs</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">HTTP VERB</th>
<th class="tableblock halign-left valign-top">URI</th>
<th class="tableblock halign-left valign-top">Query Parameters</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/usages</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Record usage</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/1.0/kb/usages/{subscriptionId}/{unitType}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">startTime, endTime</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get usage</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_json_fields_usagejson">Json fields UsageJson</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">subscriptionId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">unitType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">startTime</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">endTime</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">amount</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_java_api">Java API</h3>
<div class="paragraph">
<p>JavaDocs are published <a href="javadoc/index.html">here</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="kaui">Kaui</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Kill Bill itself doesn&#8217;t provide a UI to manage your accounts and subscriptions. All interactions with the core platform is expected to be done via the REST API and/or the Java APIs (if you decide to embed Kill Bill).</p>
</div>
<div class="paragraph">
<p><a href="http://github.com/killbill/killbill-admin-ui">Kaui</a> (the Kill Bill Admin UI) is a UI on top of Kill Bill. It is provided as a Rails mountable engine, so you can easily integrate it with existing internal tools in your company, or simply use it as a standalone application. Note that you don&#8217;t have to use Kaui in order to use Kill Bill.  You can see some Kaui screen shots <a href="http://kill-bill.org/kaui.html">here</a>.</p>
</div>
<div class="paragraph">
<p>Besides Rails, we provide modules for other Web Frameworks. For example, Drupal users may want to use the <a href="https://github.com/killbill/killbill-drupal-plugin">Kill Bill Drupal plugin</a> instead. Checkout our <a href="https://github.com/killbill/">GitHub</a> page for other alternatives.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_glossary">Glossary</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Account</strong> - An object representing a customer account. It contains details about the customer such as name, address, email address, phone number etc.</p>
</div>
<div class="paragraph">
<p><strong>Bundle</strong> - A bundle is a collection of subscriptions associated with a single service instance. For example, I might have a base subscription for my phone plus an addon that gives me cheap international dialing. Because both Subscriptions are associated with the one phone, they collected into a single bundle. An account may own several Bundles, each with one or more Subscriptions.</p>
</div>
<div class="paragraph">
<p><strong>Catalog</strong> - Catalogs describes the set of Products, Plans, Price Lists and Rules that are being made availabel to customers. A catalog lets Kill Bill know what is being offered for sale and how and how much to charge for it.</p>
</div>
<div class="paragraph">
<p><strong>Payment Method</strong> - Payment methods store the details required for Kill Bill to trigger a payment. They represent things like credit cards, debit cards or Paypal accounts. Each account can have many Payment Methods and at most one Default Payment Method. Note that much of the representation of a Payment Method is plugin-specific and is actually stored by the Payment Plugin itself.</p>
</div>
<div class="paragraph">
<p><strong>Plan</strong> - Plans are Catalog objects that define how a Product is to be paid for. They can have multiple phases (e.g. trial, discount, evergreen). The phase specifies the frequency of payment and the prices in multiple currencies. Each phase can have fixed and recurring prices associated with it. Each Product can have multiple Plans specifying different ways that the Product can be purchased (e.g. a monthly Plan and an annual Plan)</p>
</div>
<div class="paragraph">
<p><strong>Price list</strong> - Price lists are collections of plans that might be associated with a particular program (e.g. an affiliate program or a discount program). A plan can be in many price lists. There must be a default price list that is used when no pricelist is specified. When a subscription changes plan, Catalog rules can be used to determine which Price list the new Plan should use.</p>
</div>
<div class="paragraph">
<p><strong>Product</strong> - Products represent the product or service that the customer buys.</p>
</div>
<div class="paragraph">
<p><strong>Subscription</strong> - A Subscription is a contract that associates an account with a plan and a specific start date. The subscription will trigger automated payments based on the terms of the plan.</p>
</div>
<div class="paragraph">
<p><strong>Tag</strong> - Tag can be added to Accounts, Bundles or Subscriptions. There are two kinds: System Tags can impact the behaviour of the system, User Tags are for information only. System Tags include things like: AUTO_PAY_OFF or AUTO_BILLING_OFF. User Tags can be created through the admin UI and are used to identify collections of Users, Subscriptions or Bundles so that they can easily be found or reported on later.</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2014-09-19 14:32:19 PDT
</div>
</div>
</body>
</html>